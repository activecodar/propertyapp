(this.webpackJsonppropetypro=this.webpackJsonppropetypro||[]).push([[27],{545:function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var n=a(17),r=a(9),c=a(7);function o(e,t){Object(c.a)(2,arguments);var a=Object(r.a)(e),o=Object(n.a)(t);if(isNaN(o))return new Date(NaN);if(!o)return a;var i=a.getDate(),l=new Date(a.getTime());l.setMonth(a.getMonth()+o+1,0);var u=l.getDate();return i>=u?l:(a.setFullYear(l.getFullYear(),l.getMonth(),i),a)}},549:function(e,t,a){"use strict";a.d(t,"b",(function(){return E})),a.d(t,"e",(function(){return h})),a.d(t,"d",(function(){return x})),a.d(t,"p",(function(){return v})),a.d(t,"m",(function(){return g})),a.d(t,"n",(function(){return w})),a.d(t,"j",(function(){return k})),a.d(t,"i",(function(){return M})),a.d(t,"l",(function(){return F})),a.d(t,"o",(function(){return _})),a.d(t,"f",(function(){return S})),a.d(t,"h",(function(){return D})),a.d(t,"q",(function(){return T})),a.d(t,"c",(function(){return I})),a.d(t,"g",(function(){return A})),a.d(t,"k",(function(){return P})),a.d(t,"a",(function(){return C}));var n=a(512),r=a(513),c=a(514),o=a(515),i=a(572),l=a(573),u=a(574),f=a(575),s=Object(n.a)({start:Object(r.a)(Object(c.a)()),end:Object(o.a)(Object(c.a)())}),p=["Mr","Prof","Hon","Sir","Mrs","Miss","Dr","Madam","Other"],m=["Male","Female","Unspecified"],d=["Security Deposit Refund","Water Deposit Refund","Management Fees","Utilities","Taxes","Mortgage","Office","Maintenance & Cleaning","Advertising","Insurance","Legal & Other Professional Fees","Auto & Travel","Supplies","Other Refund","Repairs","Other"],b=["Bed Sitter","One Bedroom","Two Bedroom","Single Room","Double Room","Shop","Other"],y=["Fixed","Fixed w/rollover"],O=["Electric","Sewer","Water"],j=["Daily","Weekly","Monthly","Quarterly","Half-Yearly","Yearly"];function E(){return p}function h(){return m}function x(){return d}function v(){return b}function g(){for(var e=[],t=1;t<=5;t++)e.push(t);return e.concat("5+")}function w(){for(var e=[],t=1;t<=5;t++)e.push(t);return e}function k(){return O}function M(){return y}function F(){return j}function _(){return[{id:"month-to-date",text:"Month To Date"},{id:"last-month",text:"Last Month"},{id:"3-months-to-date",text:"3 Months To Date"},{id:"year-to-date",text:"Year To Date"},{id:"last-year",text:"Last Year"}]}function S(){return[Object(i.a)(Object(l.a)(Object(c.a)(),1)),Object(u.a)(Object(l.a)(Object(c.a)(),1))]}function D(){return[Object(r.a)(Object(f.a)(Object(c.a)(),1)),Object(o.a)(Object(f.a)(Object(c.a)(),1))]}function T(){return[Object(r.a)(Object(c.a)()),Object(c.a)()]}function I(){return[Object(i.a)(Object(c.a)()),Object(u.a)(Object(c.a)())]}function A(){return[Object(i.a)(Object(l.a)(Object(c.a)(),2)),Object(u.a)(Object(c.a)())]}function P(){return s}var C=new Intl.NumberFormat(void 0,{style:"decimal",currency:"KES"})},551:function(e,t,a){"use strict";a.d(t,"a",(function(){return u}));var n=a(525),r=a(0),c=a.n(r),o=a(207),i=a.n(o),l=a(201);function u(e){var t=e.displayText,a=e.disabled,r=e.reportName,o=e.reportTitle,u=e.headCells,f=e.dataToPrint;return c.a.createElement(n.a,{type:"button","aria-label":"Export to Excel",variant:"contained",size:"medium",color:"primary",disabled:a,onClick:function(){return Object(l.c)(r,o,u,f,r)},startIcon:c.a.createElement(i.a,null)},t||"Excel")}t.b=function(e){var t=e.disabled,a=e.reportName,r=e.reportTitle,o=e.headCells,u=e.dataToPrint;return c.a.createElement(n.a,{type:"button","aria-label":"Export to Excel",variant:"contained",size:"medium",color:"primary",disabled:t,onClick:function(){return Object(l.a)(a,r,o,u,a)},startIcon:c.a.createElement(i.a,null)},"Excel")}},553:function(e,t,a){"use strict";var n=a(14);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(0)),c=(0,n(a(15)).default)(r.default.createElement("path",{d:"M12.5 8c-2.65 0-5.05.99-6.9 2.6L2 7v9h9l-3.62-3.62c1.39-1.16 3.16-1.88 5.12-1.88 3.54 0 6.55 2.31 7.6 5.5l2.37-.78C21.08 11.03 17.15 8 12.5 8z"}),"Undo");t.default=c},572:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var n=a(9),r=a(7);function c(e){Object(r.a)(1,arguments);var t=Object(n.a)(e);return t.setDate(1),t.setHours(0,0,0,0),t}},573:function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var n=a(17),r=a(545),c=a(7);function o(e,t){Object(c.a)(2,arguments);var a=Object(n.a)(t);return Object(r.a)(e,-a)}},574:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var n=a(9),r=a(7);function c(e){Object(r.a)(1,arguments);var t=Object(n.a)(e),a=t.getMonth();return t.setFullYear(t.getFullYear(),a+1,0),t.setHours(23,59,59,999),t}},575:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var n=a(17),r=a(545),c=a(7);function o(e,t){Object(c.a)(2,arguments);var a=Object(n.a)(t);return Object(r.a)(e,12*a)}function i(e,t){Object(c.a)(2,arguments);var a=Object(n.a)(t);return o(e,-a)}},625:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var n=a(9),r=a(7);function c(e,t){Object(r.a)(2,arguments);var a=Object(n.a)(e),c=Object(n.a)(t);return a.getFullYear()===c.getFullYear()&&a.getMonth()===c.getMonth()}},682:function(e,t,a){"use strict";a.r(t);var n=a(11),r=a(44),c=a(202),o=a(203),i=a(0),l=a.n(i),u=a(453),f=a(534),s=a(525),p=a(541),m=a(524),d=a(205),b=a.n(d),y=a(553),O=a.n(y),j=a(41),E=a(25),h=a(46),x=a(549),v=a(517),g=a(514),w=a(545),k=a(573),M=a(537),F=a(536),_=a(625),S=a(551),D=a(122),T=Object(x.o)(),I=function(e){var t=e.transactions,a=e.expenses,d=e.leases,y=e.properties,j=Object(h.a)(),E=Object(i.useState)([]),I=Object(r.a)(E,2),A=I[0],P=I[1],C=Object(i.useState)([]),R=Object(r.a)(C,2),N=R[0],G=R[1],Y=Object(i.useState)([]),L=Object(r.a)(Y,2),W=L[0],z=L[1],H=Object(i.useState)({}),B=Object(r.a)(H,2),U=B[0],q=B[1],J=Object(i.useState)([]),K=Object(r.a)(J,2),Q=K[0],V=K[1],X=Object(i.useState)([]),Z=Object(r.a)(X,2),$=Z[0],ee=Z[1],te=Object(i.useState)([]),ae=Object(r.a)(te,2),ne=ae[0],re=ae[1],ce=Object(i.useState)("all"),oe=Object(r.a)(ce,2),ie=oe[0],le=oe[1],ue=Object(i.useState)("month-to-date"),fe=Object(r.a)(ue,2),se=fe[0],pe=fe[1];Object(i.useEffect)((function(){var e;switch(se){case"last-month":e=[Object(x.f)()[0]];break;case"year-to-date":e=Object(n.a)(Array(Object(v.a)(Object(g.a)())+1).keys()).map((function(e){return Object(w.a)(Object(x.q)()[0],e)}));break;case"last-year":e=Object(n.a)(Array(12).keys()).map((function(e){return Object(w.a)(Object(x.h)()[0],e)}));break;case"month-to-date":e=Object(n.a)(Array(1).keys()).reverse().map((function(e){return Object(k.a)(Object(g.a)(),e)}));break;case"3-months-to-date":e=Object(n.a)(Array(3).keys()).reverse().map((function(e){return Object(k.a)(Object(g.a)(),e)}));break;default:e=[Object(x.f)()[0]]}var t=[].concat(Object(n.a)(e.map((function(e){return Object(M.a)(e,"MMMM yyyy")}))),["Total as of ".concat(Object(M.a)(e[e.length-1],"MMMM yyyy"))]),a=[],r={income_type:"Rental Income"},c={income_type:"Total Income"},o={income_type:"Net Income"},i=0;e.forEach((function(e){var t=W.filter((function(e){return"rent"===e.payment_type})).filter((function(t){var a=Object(F.a)(t.payment_date,"yyyy-MM-dd",new Date);return Object(_.a)(e,a)})).reduce((function(e,t){return e+(parseFloat(t.payment_amount)||0)}),0);i+=t,r[Object(M.a)(e,"MMMM yyyy")]=t})),r[t[t.length-1]]=i,a.push(r);var l={income_type:"Other Income"},u=0;e.forEach((function(e){var t=W.filter((function(e){return"rent"!==e.payment_type})).filter((function(t){var a=Object(F.a)(t.payment_date,"yyyy-MM-dd",new Date);return Object(_.a)(e,a)})).reduce((function(e,t){return e+(parseFloat(t.payment_amount)||0)}),0);u+=t,l[Object(M.a)(e,"MMMM yyyy")]=t})),l[t[t.length-1]]=u,a.push(l),a.forEach((function(e){t.forEach((function(t){var a=parseFloat(e[t])||0;c[t]=(parseFloat(c[t])||0)+a}))})),a.push(c);var f=[],s={expense_type:"Total Expenses"},p=[];e.forEach((function(e){A.filter((function(t){var a=Object(F.a)(t.expense_date,"yyyy-MM-dd",new Date);return Object(_.a)(e,a)})).forEach((function(t){var a=t.type,n=t.amount,r={};r.expense_type=a,r.amount=parseFloat(n)||0,r.month=Object(M.a)(e,"MMMM yyyy"),p.push(r)}))})),new Set(p.map((function(e){return e.expense_type}))).forEach((function(e){p.filter((function(t){return t.expense_type===e})).forEach((function(a){var n=f.find((function(t){return t.expense_type===e}));if("undefined"!==typeof n)n[a.month]=(parseFloat(n[a.month])||0)+parseFloat(a.amount),n[t[t.length-1]]=(parseFloat(n[t[t.length-1]])||0)+parseFloat(a.amount);else{var r={};r.expense_type=e,r[a.month]=parseFloat(a.amount)||0,r[t[t.length-1]]=parseFloat(a.amount)||0,f.push(r)}}))})),f.forEach((function(e){t.forEach((function(t){var a=parseFloat(e[t])||0;s[t]=(parseFloat(s[t])||0)+a}))})),f.push(s),t.forEach((function(e){o[e]=(parseFloat(c[e])||0)-(parseFloat(s[e])||0)})),ee(t),q(o),V(a),re(f)}),[A,W]),Object(i.useEffect)((function(){P(a)}),[a]),Object(i.useEffect)((function(){z(t)}),[t]),Object(i.useEffect)((function(){G(d)}),[d]);var me=N.reduce((function(e,t){return e+parseFloat(t.security_deposit)||0}),0),de=N.reduce((function(e,t){return e+parseFloat(t.water_deposit)||0}),0),be=function(e){e.preventDefault();var n=t.filter((function(e){var t=e.property_id;return"all"===ie||t===ie})),r=a.filter((function(e){var t=e.property_id;return"all"===ie||t===ie})),c=d.filter((function(e){var t=e.property_id;return"all"===ie||t===ie}));z(n),G(c),P(r)};return l.a.createElement(c.a,{pageTitle:"Properties Income Statement"},l.a.createElement(u.a,{container:!0,spacing:3,alignItems:"center"},l.a.createElement(u.a,{item:!0,key:2},l.a.createElement(o.a,{text:"Properties Income Statement"})),l.a.createElement(u.a,{container:!0,spacing:2,item:!0,alignItems:"center",direction:"row",key:1},l.a.createElement(u.a,{item:!0},l.a.createElement(S.a,{displayText:"Export Income",reportName:"Properties Income Records",reportTitle:"Properties Income Records",headCells:$,dataToPrint:Q})),l.a.createElement(u.a,{item:!0},l.a.createElement(S.a,{displayText:"Export Expenses",reportName:"Properties Expenses  Records",reportTitle:"Properties Expenses Data",headCells:$,dataToPrint:ne}))),l.a.createElement(u.a,{item:!0,xs:12},l.a.createElement(f.a,{border:1,borderRadius:"borderRadius",borderColor:"grey.400"},l.a.createElement("form",{className:j.form,id:"contactSearchForm",onSubmit:be},l.a.createElement(u.a,{container:!0,spacing:2,justify:"center",direction:"row"},l.a.createElement(u.a,{item:!0,md:6,xs:12},l.a.createElement(p.a,{fullWidth:!0,select:!0,variant:"outlined",name:"property_filter",label:"Select Property",id:"property_filter",value:ie,onChange:function(e){le(e.target.value)}},l.a.createElement(m.a,{key:"all",value:"all"},"All Properties"),y.map((function(e,t){return l.a.createElement(m.a,{key:t,value:e.id},e.ref)})))),l.a.createElement(u.a,{item:!0,xs:12,md:6},l.a.createElement(p.a,{fullWidth:!0,variant:"outlined",select:!0,id:"from_filter",name:"from_filter",label:"Period",value:se,onChange:function(e){pe(e.target.value)},InputLabelProps:{shrink:!0}},T.map((function(e,t){return l.a.createElement(m.a,{key:t,value:e.id},e.text)}))))),l.a.createElement(u.a,{container:!0,spacing:2,item:!0,justify:"flex-end",alignItems:"center",direction:"row",key:1},l.a.createElement(u.a,{item:!0},l.a.createElement(s.a,{onClick:function(e){return be(e)},type:"submit",form:"contactSearchForm",color:"primary",variant:"contained",size:"medium",startIcon:l.a.createElement(b.a,null)},"SEARCH")),l.a.createElement(u.a,{item:!0},l.a.createElement(s.a,{onClick:function(e){return function(e){e.preventDefault(),le("all"),pe("month-to-date"),P(a),z(t),G(d)}(e)},type:"reset",form:"contactSearchForm",color:"primary",variant:"contained",size:"medium",startIcon:l.a.createElement(O.a,null)},"RESET")))))),l.a.createElement(u.a,{item:!0,container:!0,sm:12,spacing:2},l.a.createElement(u.a,{item:!0,container:!0,direction:"row",spacing:2},l.a.createElement(D.a,{value:me,title:"Total Security Deposit Liability"}),l.a.createElement(D.a,{value:de,title:"Total Water Deposit Liability"})),l.a.createElement(u.a,{item:!0,sm:12},l.a.createElement("div",{style:{width:"100%"}},l.a.createElement(f.a,{display:"flex",key:"adadf",flexDirection:"row",p:1,bgcolor:"grey.300"},l.a.createElement(f.a,{key:"first1",width:1,textAlign:"left",flexGrow:1,p:1},"Income"),$.map((function(e,t){return l.a.createElement(f.a,{key:t,width:1,textAlign:"left",flexGrow:1,p:1},e," (Ksh)")}))),Q.map((function(e,t){var a=$.map((function(t,a){return l.a.createElement(f.a,{key:a,width:1,textAlign:"left",flexGrow:1,p:1},x.a.format(e[t]))}));return l.a.createElement(f.a,{display:"flex",key:t,flexDirection:"row",p:1,bgcolor:"background.paper"},l.a.createElement(f.a,{textAlign:"left",width:1,key:t+"jl",flexGrow:1,p:1},e.income_type),a)}))),l.a.createElement("div",{style:{width:"100%"}},l.a.createElement(f.a,{display:"flex",key:"adlaldadf",flexDirection:"row",p:1,bgcolor:"grey.300"},l.a.createElement(f.a,{key:"faldirst1",width:1,textAlign:"left",flexGrow:1,p:1},"Expenses"),$.map((function(e,t){return l.a.createElement(f.a,{key:t,width:1,textAlign:"left",flexGrow:1,p:1},e)}))),ne.map((function(e,t){var a=$.map((function(t,a){return l.a.createElement(f.a,{key:a,width:1,textAlign:"left",flexGrow:1,p:1},x.a.format(e[t]||0))}));return l.a.createElement(f.a,{display:"flex",key:t,flexDirection:"row",p:1,bgcolor:"background.paper"},l.a.createElement(f.a,{textAlign:"left",width:1,key:t+"iiajl",flexGrow:1,p:1},e.expense_type),a)}))),l.a.createElement("div",{style:{width:"100%"}},l.a.createElement(f.a,{display:"flex",key:"adlaldadf",flexDirection:"row",p:1,bgcolor:"grey.300"},l.a.createElement(f.a,{key:"faldirst1",width:1,textAlign:"left",flexGrow:1,p:1},"Net Income"),$.map((function(e,t){return l.a.createElement(f.a,{key:t,width:1,textAlign:"left",flexGrow:1,p:1},e)}))),l.a.createElement(f.a,{display:"flex",key:"kjb",flexDirection:"row",p:1,bgcolor:"background.paper"},l.a.createElement(f.a,{textAlign:"left",width:1,key:"iiajl",flexGrow:1,p:1},"Net Income"),$.map((function(e,t){return l.a.createElement(f.a,{key:t,width:1,textAlign:"left",flexGrow:1,p:1},x.a.format(U[e]||0))}))))))))};I=Object(j.b)((function(e,t){return{transactions:e.transactions,expenses:e.expenses,properties:e.properties,leases:e.leases}}))(I),t.default=Object(E.g)(I)}}]);
//# sourceMappingURL=27.a9f24182.chunk.js.map