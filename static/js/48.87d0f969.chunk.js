(this.webpackJsonppropetypro=this.webpackJsonppropetypro||[]).push([[48],{549:function(e,t,a){"use strict";a.d(t,"b",(function(){return y})),a.d(t,"e",(function(){return _})),a.d(t,"d",(function(){return v})),a.d(t,"p",(function(){return O})),a.d(t,"m",(function(){return j})),a.d(t,"n",(function(){return x})),a.d(t,"j",(function(){return w})),a.d(t,"i",(function(){return C})),a.d(t,"l",(function(){return I})),a.d(t,"o",(function(){return S})),a.d(t,"f",(function(){return k})),a.d(t,"h",(function(){return q})),a.d(t,"q",(function(){return U})),a.d(t,"c",(function(){return T})),a.d(t,"g",(function(){return B})),a.d(t,"k",(function(){return R})),a.d(t,"a",(function(){return D}));var n=a(512),r=a(513),i=a(514),o=a(515),c=a(572),l=a(573),u=a(574),m=a(575),s=Object(n.a)({start:Object(r.a)(Object(i.a)()),end:Object(o.a)(Object(i.a)())}),d=["Mr","Prof","Hon","Sir","Mrs","Miss","Dr","Madam","Other"],p=["Male","Female","Unspecified"],f=["Security Deposit Refund","Water Deposit Refund","Management Fees","Utilities","Taxes","Mortgage","Office","Maintenance & Cleaning","Advertising","Insurance","Legal & Other Professional Fees","Auto & Travel","Supplies","Other Refund","Repairs","Other"],b=["Bed Sitter","One Bedroom","Two Bedroom","Single Room","Double Room","Shop","Other"],g=["Fixed","Fixed w/rollover"],h=["Electric","Sewer","Water"],E=["Daily","Weekly","Monthly","Quarterly","Half-Yearly","Yearly"];function y(){return d}function _(){return p}function v(){return f}function O(){return b}function j(){for(var e=[],t=1;t<=5;t++)e.push(t);return e.concat("5+")}function x(){for(var e=[],t=1;t<=5;t++)e.push(t);return e}function w(){return h}function C(){return g}function I(){return E}function S(){return[{id:"month-to-date",text:"Month To Date"},{id:"last-month",text:"Last Month"},{id:"3-months-to-date",text:"3 Months To Date"},{id:"year-to-date",text:"Year To Date"},{id:"last-year",text:"Last Year"}]}function k(){return[Object(c.a)(Object(l.a)(Object(i.a)(),1)),Object(u.a)(Object(l.a)(Object(i.a)(),1))]}function q(){return[Object(r.a)(Object(m.a)(Object(i.a)(),1)),Object(o.a)(Object(m.a)(Object(i.a)(),1))]}function U(){return[Object(r.a)(Object(i.a)()),Object(i.a)()]}function T(){return[Object(c.a)(Object(i.a)()),Object(u.a)(Object(i.a)())]}function B(){return[Object(c.a)(Object(l.a)(Object(i.a)(),2)),Object(u.a)(Object(i.a)())]}function R(){return s}var D=new Intl.NumberFormat(void 0,{style:"decimal",currency:"KES"})},556:function(e,t,a){"use strict";a.d(t,"a",(function(){return p}));var n=a(0),r=a.n(n),i=a(199),o=a(526),c=a(129),l=a(527),u=a(529),m=a(453),s=a(64),d=Object(i.a)((function(e){return{root:{display:"flex",alignItems:"center",height:80,width:120},wrapper:{margin:e.spacing(1),position:"relative",height:50,width:50},buttonProgress:{color:c.a[500],position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12}}}));function p(e){var t=e.open,a=e.dialogTitle,n=d();return r.a.createElement(l.a,{maxWidth:"md","aria-labelledby":"simple-dialog-title",open:t},r.a.createElement(u.a,null,r.a.createElement(m.a,{container:!0,alignItems:"center",direction:"column"},r.a.createElement(m.a,{item:!0,lg:!0},r.a.createElement(s.a,null,a||"Saving...")),r.a.createElement(m.a,{item:!0,lg:!0},r.a.createElement("div",{className:n.root},r.a.createElement("div",{className:n.wrapper},t&&r.a.createElement(o.a,{size:50,className:n.buttonProgress})))))))}},580:function(e,t,a){"use strict";var n=a(44),r=a(0),i=a.n(r),o=a(453),c=a(525),l=a(527),u=a(529),m=a(587);a(588);t.a=function(e){var t=e.open,a=e.selectedFile,s=e.setCroppedImageData,d=e.cropHeight,p=e.cropWidth,f=Object(r.useState)(),b=Object(n.a)(f,2),g=b[0],h=b[1],E=Object(r.useState)(),y=Object(n.a)(E,2),_=y[0],v=y[1],O=a,j=new FileReader;j.onloadend=function(){v(j.result)},j.readAsDataURL(O);var x=function(){s("")};return i.a.createElement(l.a,{open:t,onClose:x,"aria-labelledby":"form-dialog-title"},i.a.createElement(u.a,null,i.a.createElement(o.a,{container:!0,spacing:2},i.a.createElement(o.a,{item:!0},i.a.createElement(m.a,{style:{height:"100%",width:"100%"},initialAspectRatio:p===d?1:16/9,src:_,viewMode:.5,guides:!0,minCropBoxHeight:d,minCropBoxWidth:p,background:!1,responsive:!0,autoCropArea:.5,checkOrientation:!1,onInitialized:function(e){h(e)},cropBoxResizable:!1,data:{height:d,width:p}})),i.a.createElement(o.a,{item:!0,container:!0,justify:"center",direction:"row",spacing:2},i.a.createElement(o.a,{item:!0},i.a.createElement(c.a,{color:"secondary",variant:"contained",size:"medium",onClick:function(){return x()},disableElevation:!0},"Cancel")),i.a.createElement(o.a,{item:!0},i.a.createElement(c.a,{color:"primary",variant:"contained",size:"medium",onClick:function(){return function(){if("undefined"!==typeof g){var e=g.getCroppedCanvas().toDataURL();O.data=e,s(O)}}()}},"Crop Image"))))))}},697:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(453),o=a(203),c=a(202),l=a(41),u=a(10),m=a.n(u),s=a(20),d=a(64),p=a(524),f=a(534),b=a(541),g=a(525),h=a(542),E=a(450),y=a(589),_=a.n(y),v=a(557),O=a.n(v),j=a(558),x=a.n(j),w=a(208),C=a(55),I=a(37),S=a(46),k=a(25),q=a(549),U=a(580),T=a(556),B=a(19),R=Object(q.p)(),D=Object(q.n)(),F=Object(q.m)(),W=B.e().shape({property_id:B.g().trim().required("Property is Required"),unit_type:B.g().trim().required("Unit Type is Required"),baths:B.g().trim(),beds:B.g().trim().required("Beds is required"),ref:B.g().trim().required("Unit Ref Required"),sqm:B.d().typeError("Square meters must be a number").min(0).default(0)}),M=Object(k.g)((function(e){var t=Object(S.a)(),a=e.properties,n=e.history,o=e.handleItemSubmit,c=e.propertyUnitToEdit||{},l={id:c.id,ref:c.ref||"",property_id:c.property_id||"",address:c.address||"",unit_type:c.unit_type||"",beds:c.beds||"",baths:c.baths||"",sqm:c.sqm||"",unit_image_url:c.unit_image_url||"",file_to_load_url:""};return r.a.createElement(C.b,{initialValues:l,enableReinitialize:!0,validationSchema:W,onSubmit:function(){var e=Object(s.a)(m.a.mark((function e(t,a){var n,r,i,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=a.resetForm,r=a.setStatus,e.prev=1,i={id:t.id,property_id:t.property_id,ref:t.ref,address:t.ref,unit_type:t.unit_type,beds:t.beds,baths:t.baths,sqm:t.sqm},!t.unit_image||!t.unit_image.data){e.next=11;break}if(!t.unit_image_url){e.next=7;break}return e.next=7,Object(I.c)(t.unit_image_url);case 7:return e.next=9,Object(I.t)(t.unit_image);case 9:c=e.sent,i.unit_image_url=c;case 11:return e.next=13,o(i,"property_units");case 13:n({}),r({sent:!0,msg:"Unit saved successfully!"}),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(1),r({sent:!1,msg:"Error! ".concat(e.t0,".")});case 20:case"end":return e.stop()}}),e,null,[[1,17]])})));return function(t,a){return e.apply(this,arguments)}}()},(function(e){var o=e.values,c=e.status,l=e.handleSubmit,u=e.touched,y=e.errors,v=e.handleChange,j=e.handleBlur,C=e.setFieldValue,S=e.isSubmitting;return r.a.createElement("form",{className:t.form,method:"post",id:"propertyUnitInputForm",onSubmit:l},r.a.createElement(i.a,{container:!0,spacing:2},c&&c.msg&&r.a.createElement(w.a,{variant:c.sent?"success":"error",message:c.msg}),S&&r.a.createElement(T.a,{open:!0}),r.a.createElement(i.a,{container:!0,item:!0,spacing:2,direction:"column"},r.a.createElement(i.a,{item:!0},r.a.createElement(d.a,{variant:"subtitle2"},"Unit Details")),r.a.createElement(i.a,{container:!0,item:!0,spacing:2,direction:"row"},r.a.createElement(i.a,{item:!0,xs:12,md:6},r.a.createElement(b.a,{fullWidth:!0,variant:"outlined",select:!0,name:"property_id",label:"Property With Unit",id:"property_id",onBlur:j,onChange:v,value:o.property_id,error:y.property_id&&u.property_id,helperText:u.property_id&&y.property_id},a.map((function(e,t){return r.a.createElement(p.a,{key:t,value:e.id},e.ref)})))),r.a.createElement(i.a,{item:!0,xs:12,md:6},r.a.createElement(b.a,{fullWidth:!0,variant:"outlined",type:"text",name:"ref",id:"ref",label:"Unit Ref",value:o.ref,onChange:v,onBlur:j,error:y.ref&&u.ref,helperText:u.ref&&y.ref}))),r.a.createElement(i.a,{container:!0,item:!0,spacing:2,direction:"row"},r.a.createElement(i.a,{item:!0,xs:12,md:6},r.a.createElement(b.a,{fullWidth:!0,variant:"outlined",select:!0,name:"unit_type",label:"Unit Type",id:"unit_type",onBlur:j,onChange:v,value:o.unit_type,error:y.unit_type&&u.unit_type,helperText:u.unit_type&&y.unit_type},R.map((function(e,t){return r.a.createElement(p.a,{key:t,value:e},e)})))),r.a.createElement(i.a,{item:!0,xs:12,md:6},r.a.createElement(b.a,{fullWidth:!0,variant:"outlined",select:!0,name:"beds",label:"Beds",id:"beds",onBlur:j,onChange:v,value:o.beds,error:y.beds&&u.beds,helperText:u.beds&&y.beds},D.map((function(e,t){return r.a.createElement(p.a,{key:t,value:e},e)}))))),r.a.createElement(i.a,{container:!0,item:!0,spacing:2,direction:"row"},r.a.createElement(i.a,{item:!0,xs:12,md:6},r.a.createElement(b.a,{fullWidth:!0,variant:"outlined",select:!0,name:"baths",label:"Baths",id:"baths",onBlur:j,onChange:v,value:o.baths,error:y.baths&&u.baths,helperText:"Baths in Unit"},F.map((function(e,t){return r.a.createElement(p.a,{key:t,value:e},e)})))),r.a.createElement(i.a,{item:!0,xs:12,md:6},r.a.createElement(b.a,{fullWidth:!0,variant:"outlined",name:"sqm",id:"sqm",label:"Square meters",value:o.sqm,onChange:v,onBlur:j,error:y.sqm&&u.sqm,helperText:u.sqm&&y.sqm}))),r.a.createElement(i.a,{item:!0,container:!0,direction:"row",justify:"flex-start",spacing:4,alignItems:"center"},r.a.createElement(i.a,{key:1,item:!0,xs:12,md:6},o.file_to_load_url&&r.a.createElement(U.a,{open:!0,selectedFile:o.file_to_load_url,setCroppedImageData:function(e){C("file_to_load_url",""),C("unit_image",e)},cropHeight:200,cropWidth:300}),r.a.createElement(h.a,{style:{width:"100%",height:"300px"},alt:"Unit Image",src:o.unit_image?o.unit_image.data:o.unit_image_url,className:t.largeAvatar,variant:"rounded"},"Image")),r.a.createElement(i.a,{key:2,xs:12,item:!0,md:!0},r.a.createElement(f.a,null,r.a.createElement("input",{onChange:function(e){var t=e.currentTarget.files[0];C("file_to_load_url",t)},accept:"image/*",className:t.fileInputDisplayNone,id:"unit-image-input",type:"file"}),r.a.createElement("label",{htmlFor:"unit-image-input"},r.a.createElement(E.a,{color:"primary","aria-label":"upload picture",component:"span"},r.a.createElement(_.a,null))),r.a.createElement(f.a,{marginBottom:"1"},o.unit_image_url||o.unit_image?"Change Image":"Add Image"),o.unit_image_url?r.a.createElement(g.a,{variant:"contained",onClick:Object(s.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(I.c)(o.unit_image_url);case 2:C("unit_image_url","");case 3:case"end":return e.stop()}}),e)})))},"Delete Image"):null)))),r.a.createElement(i.a,{item:!0,container:!0,direction:"row",className:t.buttonBox},r.a.createElement(i.a,{item:!0},r.a.createElement(g.a,{color:"secondary",variant:"contained",size:"medium",startIcon:r.a.createElement(x.a,null),onClick:function(){return n.goBack()},disableElevation:!0},"Cancel")),r.a.createElement(i.a,{item:!0},r.a.createElement(g.a,{type:"submit",color:"primary",variant:"contained",size:"medium",startIcon:r.a.createElement(O.a,null),form:"propertyUnitInputForm",disabled:S},"Save")))))}))})),N=function(e){var t=e.propertyUnitToEdit,a=e.properties,n=e.handleItemSubmit,l=t.id?"Edit Unit":"Add Unit";return r.a.createElement(c.a,{pageTitle:l},r.a.createElement(i.a,{container:!0,justify:"center",direction:"column"},r.a.createElement(i.a,{item:!0,key:2},r.a.createElement(o.a,{text:l})),r.a.createElement(i.a,{item:!0},r.a.createElement(M,{handleItemSubmit:n,propertyUnitToEdit:t,properties:a}))))};N=Object(l.b)((function(e,t){var a=e.propertyUnits.find((function(e){return e.id===t.match.params.propertyUnitId}));a||(a={property_id:(e.properties.find((function(e){return e.id===t.match.params.propertyId}))||{}).id});return{propertyUnitToEdit:a,properties:e.properties}}),(function(e){return{handleItemSubmit:function(t,a){return e(Object(I.h)(t,a))}}}))(N);t.default=Object(k.g)(N)}}]);
//# sourceMappingURL=48.87d0f969.chunk.js.map