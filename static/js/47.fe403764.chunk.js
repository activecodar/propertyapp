(this.webpackJsonppropetypro=this.webpackJsonppropetypro||[]).push([[47],{556:function(e,t,a){"use strict";a.d(t,"a",(function(){return p}));var n=a(0),r=a.n(n),i=a(199),c=a(526),m=a(129),o=a(527),l=a(529),u=a(453),s=a(64),d=Object(i.a)((function(e){return{root:{display:"flex",alignItems:"center",height:80,width:120},wrapper:{margin:e.spacing(1),position:"relative",height:50,width:50},buttonProgress:{color:m.a[500],position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12}}}));function p(e){var t=e.open,a=e.dialogTitle,n=d();return r.a.createElement(o.a,{maxWidth:"md","aria-labelledby":"simple-dialog-title",open:t},r.a.createElement(l.a,null,r.a.createElement(u.a,{container:!0,alignItems:"center",direction:"column"},r.a.createElement(u.a,{item:!0,lg:!0},r.a.createElement(s.a,null,a||"Saving...")),r.a.createElement(u.a,{item:!0,lg:!0},r.a.createElement("div",{className:n.root},r.a.createElement("div",{className:n.wrapper},t&&r.a.createElement(c.a,{size:50,className:n.buttonProgress})))))))}},557:function(e,t,a){"use strict";var n=a(14);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(0)),i=(0,n(a(15)).default)(r.default.createElement("path",{d:"M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7l-4-4zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm3-10H5V5h10v4z"}),"Save");t.default=i},558:function(e,t,a){"use strict";var n=a(14);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(0)),i=(0,n(a(15)).default)(r.default.createElement("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"}),"Cancel");t.default=i},703:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(453),c=a(203),m=a(202),o=a(41),l=a(37),u=a(10),s=a.n(u),d=a(20),p=a(64),h=a(541),y=a(525),_=a(557),g=a.n(_),f=a(558),b=a.n(f),v=a(208),E=a(55),C=a(46),x=a(19),P=a(25),j=a(537),S=a(514),I=a(556),T=Object(j.a)(Object(S.a)(),"yyyy-MM-dd"),k=x.e().shape({tenant_id:x.g().trim().required("Tenant is required"),memo:x.g().trim().max(50,"Memo details should be less than 50 characters").default(""),charge_balance:x.d().typeError("Charge Balance must be a number").required("Charge balance is required"),payment_amount:x.d().typeError("Amount must be a number").positive("Amount must be a positive number").max(x.f("charge_balance"),"Payment Amount Cannot be greater than remaining balance").required("Payment amount is required"),payment_date:x.c().required("Payment Date is Required")}),O=Object(P.g)((function(e){var t=Object(C.a)(),a=e.history,n=e.chargeToAddPayment,c=e.tenantLease,m=e.handleItemSubmit,o={charge_id:n.id,unit_id:n.unit_id,charge_amount:n.charge_amount||0,charge_balance:n.balance||0,charge_label:n.charge_label||0,charge_type:n.charge_type||0,payment_amount:"",memo:"",payment_date:T,tenant_id:n.tenant_id,property_id:n.property_id,tenantLease:c};return r.a.createElement(E.b,{initialValues:o,enableReinitialize:!0,validationSchema:k,onSubmit:function(){var e=Object(d.a)(s.a.mark((function e(t,n){var r,i,c,o,l;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.resetForm,i=n.setStatus,e.prev=1,c={charge_id:t.charge_id,payment_amount:t.payment_amount,memo:t.memo,payment_date:t.payment_date,tenant_id:t.tenant_id,unit_id:t.unit_id,property_id:t.property_id,payment_label:t.charge_label,payment_type:t.charge_type},!t.tenantLease){e.next=9;break}return o=parseFloat(t.tenantLease.security_deposit)-parseFloat(t.payment_amount),l={id:t.tenantLease.id,security_deposit:o},e.next=8,m(l,"leases");case 8:c.security_deposit_charge_id=t.tenantLease.id;case 9:return e.next=11,m(c,"charge-payments");case 11:return e.next=13,m({id:t.charge_id,payed:!0},"transactions-charges");case 13:r({}),a.goBack(),i({sent:!0,msg:"Details saved successfully!"}),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(1),i({sent:!1,msg:"Error! ".concat(e.t0,".")});case 21:case"end":return e.stop()}}),e,null,[[1,18]])})));return function(t,a){return e.apply(this,arguments)}}()},(function(e){var n=e.values,c=e.status,m=e.handleSubmit,o=e.touched,l=e.errors,u=e.handleChange,s=e.handleBlur,d=e.isSubmitting;return r.a.createElement("form",{className:t.form,method:"post",id:"paymentInputForm",onSubmit:m},r.a.createElement(i.a,{container:!0,spacing:2,direction:"column"},c&&c.msg&&r.a.createElement(v.a,{variant:c.sent?"success":"error",message:c.msg}),d&&r.a.createElement(I.a,{open:!0}),r.a.createElement(i.a,{item:!0},r.a.createElement(p.a,{variant:"subtitle1"}," Charge Details : ",n.charge_label)),r.a.createElement(i.a,{item:!0},r.a.createElement(p.a,{variant:"subtitle1"},"Total Charge Amount : ",n.charge_amount)),r.a.createElement(i.a,{item:!0},r.a.createElement(p.a,{variant:"subtitle1"},"Charge Balance: ",n.charge_balance)),r.a.createElement(i.a,{item:!0},r.a.createElement(h.a,{fullWidth:!0,variant:"outlined",id:"payment_date",type:"date",name:"payment_date",label:"Payment Date",value:n.payment_date,onChange:u,onBlur:s,InputLabelProps:{shrink:!0},error:l.payment_date&&o.payment_date,helperText:o.payment_date&&l.payment_date})),r.a.createElement(i.a,{item:!0},r.a.createElement(h.a,{fullWidth:!0,type:"text",variant:"outlined",name:"payment_amount",id:"payment_amount",label:"Payment Amount",value:n.payment_amount,onChange:u,onBlur:s,error:l.payment_amount&&o.payment_amount,helperText:o.payment_amount&&l.payment_amount})),r.a.createElement(i.a,{item:!0},r.a.createElement(h.a,{fullWidth:!0,type:"text",multiline:!0,rows:4,variant:"outlined",name:"memo",id:"memo",label:"Payment Details/Memo",value:n.memo,onChange:u,onBlur:s,error:l.memo&&o.memo,helperText:"Include details for the payments here (max 50)"})),r.a.createElement(i.a,{item:!0,container:!0,justify:"flex-start",direction:"row",className:t.buttonBox},r.a.createElement(i.a,{item:!0},r.a.createElement(y.a,{color:"secondary",variant:"contained",size:"medium",startIcon:r.a.createElement(b.a,null),onClick:function(){return a.goBack()},disableElevation:!0},"Cancel")),r.a.createElement(i.a,{item:!0},r.a.createElement(y.a,{type:"submit",color:"primary",variant:"contained",size:"medium",startIcon:r.a.createElement(g.a,null),form:"paymentInputForm",disabled:d},"Save Payment")))))}))})),w=a(213),L=a.n(w),z=function(e){var t,a,n=e.history,o=e.location,l=e.chargeToAddPayment,u=e.leases,s=e.contactWithCharge,d=e.unitWithCharge,p=e.handleItemSubmit;return L.a.parse(o.search).charge_deposit?(a=u.filter((function(e){return!0!==e.terminated})).find((function(e){return e.unit_id===l.unit_id}))||{},t="Charge on Deposit for - ".concat(d.ref," \u2022 ").concat(s.first_name," ").concat(s.last_name)):t="Receive Payment for - ".concat(d.ref," \u2022 ").concat(s.first_name," ").concat(s.last_name),r.a.createElement(m.a,{pageTitle:"Payment Details"},r.a.createElement(i.a,{container:!0,justify:"center",direction:"column"},r.a.createElement(i.a,{item:!0,key:2},r.a.createElement(c.a,{text:t})),r.a.createElement(i.a,{container:!0,direction:"column",justify:"center",item:!0,key:3},r.a.createElement(O,{chargeToAddPayment:l,tenantLease:a,handleItemSubmit:p,history:n}))))};z=Object(o.b)((function(e,t){var a=e.transactionsCharges.find((function(e){return e.id===t.match.params.chargeId}))||{},n=e.propertyUnits.find((function(e){return e.id===a.unit_id}))||{},r=e.transactions.filter((function(e){return e.charge_id===a.id})).reduce((function(e,t){return e+parseFloat(t.payment_amount)||0}),0);return a.payed_amount=r,a.balance=parseFloat(a.charge_amount)-r,{unitWithCharge:n,contactWithCharge:e.contacts.find((function(e){return e.id===a.tenant_id}))||{},chargeToAddPayment:a,leases:e.leases}}),(function(e){return{handleItemSubmit:function(t,a){return e(Object(l.h)(t,a))}}}))(z);t.default=Object(P.g)(z)}}]);
//# sourceMappingURL=47.fe403764.chunk.js.map