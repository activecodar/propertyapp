(this.webpackJsonppropetypro=this.webpackJsonppropetypro||[]).push([[46],{556:function(e,t,a){"use strict";a.d(t,"a",(function(){return p}));var n=a(0),i=a.n(n),r=a(199),l=a(526),c=a(129),o=a(527),s=a(529),d=a(453),u=a(64),m=Object(r.a)((function(e){return{root:{display:"flex",alignItems:"center",height:80,width:120},wrapper:{margin:e.spacing(1),position:"relative",height:50,width:50},buttonProgress:{color:c.a[500],position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12}}}));function p(e){var t=e.open,a=e.dialogTitle,n=m();return i.a.createElement(o.a,{maxWidth:"md","aria-labelledby":"simple-dialog-title",open:t},i.a.createElement(s.a,null,i.a.createElement(d.a,{container:!0,alignItems:"center",direction:"column"},i.a.createElement(d.a,{item:!0,lg:!0},i.a.createElement(u.a,null,a||"Saving...")),i.a.createElement(d.a,{item:!0,lg:!0},i.a.createElement("div",{className:n.root},i.a.createElement("div",{className:n.wrapper},t&&i.a.createElement(l.a,{size:50,className:n.buttonProgress})))))))}},557:function(e,t,a){"use strict";var n=a(14);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a(0)),r=(0,n(a(15)).default)(i.default.createElement("path",{d:"M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7l-4-4zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm3-10H5V5h10v4z"}),"Save");t.default=r},558:function(e,t,a){"use strict";var n=a(14);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a(0)),r=(0,n(a(15)).default)(i.default.createElement("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"}),"Cancel");t.default=r},708:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),r=a(453),l=a(203),c=a(202),o=a(41),s=a(97),d=a(10),u=a.n(d),m=a(20),p=a(525),f=a(541),v=a(64),_=a(208),g=a(55),E=a(46),h=a(557),b=a.n(h),y=a(690),O=a(558),j=a.n(O),I=a(19),k=a(537),w=a(514),T=a(556),M=Object(k.a)(Object(w.a)(),"yyyy-MM-dd"),L=I.e().shape({lease_details:I.e().typeError("Rental agreement is required").required("Rental agreement is required"),notification_date:I.c().required("Vacating Date Required"),vacating_date:I.c().required("Move Out Date is Required")}),x=function(e){var t=e.activeLeases,a=e.submitForm,n=e.history,l=Object(E.a)(),c=e.noticeToEdit||{},o={id:c.id,notification_date:c.notification_date||M,vacating_date:c.vacating_date||M,lease_id:c.lease_id||"",lease_details:t.find((function(e){return e.id===c.lease_id}))||null};return i.a.createElement(g.b,{initialValues:o,enableReinitialize:!0,validationSchema:L,onSubmit:function(){var e=Object(m.a)(u.a.mark((function e(t,i){var r,l,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=i.resetForm,l=i.setStatus,e.prev=1,c={id:t.id,lease_id:t.lease_details.id,vacating_date:t.vacating_date,notification_date:t.notification_date,unit_id:t.lease_details.unit_id,property_id:t.lease_details.property_id,tenant_id:t.lease_details.tenants[0]},e.next=5,a(c,"notices");case 5:r({}),t.id&&n.goBack(),l({sent:!0,msg:"Notice saved successfully!"}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),l({sent:!1,msg:"Error! ".concat(e.t0,".")});case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t,a){return e.apply(this,arguments)}}()},(function(e){var a=e.values,c=e.status,o=e.handleSubmit,d=e.touched,u=e.errors,m=e.handleChange,g=e.setFieldValue,E=e.handleBlur,h=e.isSubmitting;return i.a.createElement("form",{className:l.form,method:"post",id:"noticeInputForm",onSubmit:o},i.a.createElement(r.a,{container:!0,spacing:2,justify:"center",alignItems:"stretch",direction:"column"},c&&c.msg&&i.a.createElement(_.a,{variant:c.sent?"success":"error",message:c.msg}),h&&i.a.createElement(T.a,{open:!0}),i.a.createElement(r.a,{item:!0},i.a.createElement(v.a,{color:"textSecondary",component:"p"},"Recording every tenant's intention to move out will automatically end the agreement on the last move-out date.")),i.a.createElement(r.a,{item:!0,container:!0,spacing:2,direction:"row"},i.a.createElement(r.a,{item:!0,sm:!0},i.a.createElement(y.a,{id:"lease_details",value:a.lease_details,onChange:function(e,t){g("lease_details",t)},style:{width:"100%"},options:t,autoHighlight:!0,getOptionLabel:function(e){return e?"".concat(e.tenant_name," ").concat(e.unit_ref):""},renderOption:function(e){return i.a.createElement(i.a.Fragment,null,e.tenant_name," ",e.unit_ref)},renderInput:function(e){return i.a.createElement(f.a,Object.assign({},e,{label:"Tenants",variant:"outlined",error:u.lease_details&&d.lease_details,helperText:d.lease_details&&u.lease_details,inputProps:Object(s.a)({},e.inputProps)}))}})),i.a.createElement(r.a,{item:!0,sm:!0},i.a.createElement(f.a,{fullWidth:!0,disabled:!0,InputLabelProps:{shrink:!0},variant:"outlined",id:"unit",name:"unit",label:"Unit",value:a.lease_details?a.lease_details.unit_ref:""}))),i.a.createElement(r.a,{item:!0,container:!0,spacing:2,direction:"row"},i.a.createElement(r.a,{item:!0,sm:!0},i.a.createElement(f.a,{disabled:!0,fullWidth:!0,InputLabelProps:{shrink:!0},variant:"outlined",id:"lease_type",name:"type",label:"Agreement Type",value:a.lease_details?a.lease_details.lease_type:""})),i.a.createElement(r.a,{item:!0,sm:!0},i.a.createElement(f.a,{disabled:!0,fullWidth:!0,InputLabelProps:{shrink:!0},variant:"outlined",id:"lease_start",name:"lease_start",label:"Start - End",value:a.lease_details?"".concat(a.lease_details.start_date," - ").concat(a.vacating_date):""}))),i.a.createElement(r.a,{item:!0,container:!0,spacing:2,direction:"row"},i.a.createElement(r.a,{item:!0,sm:!0},i.a.createElement(f.a,{fullWidth:!0,type:"date",InputLabelProps:{shrink:!0},variant:"outlined",id:"notification_date",name:"notification_date",label:"Notification Date",value:a.notification_date,onChange:m,onBlur:E,error:"notification_date"in u,helperText:u.notification_date})),i.a.createElement(r.a,{item:!0,sm:!0},i.a.createElement(f.a,{fullWidth:!0,type:"date",InputLabelProps:{shrink:!0},variant:"outlined",id:"vacating_date",name:"vacating_date",label:"Move Out Date",value:a.vacating_date,onChange:m,onBlur:E,error:"vacating_date"in u,helperText:u.vacating_date}))),i.a.createElement(r.a,{item:!0,container:!0,direction:"row",className:l.buttonBox},i.a.createElement(r.a,{item:!0},i.a.createElement(p.a,{color:"secondary",variant:"contained",size:"medium",startIcon:i.a.createElement(j.a,null),onClick:function(){return n.goBack()},disableElevation:!0},"Cancel")),i.a.createElement(r.a,{item:!0},i.a.createElement(p.a,{type:"submit",color:"primary",variant:"contained",size:"medium",startIcon:i.a.createElement(b.a,null),form:"noticeInputForm",disabled:h},"Move Out")))))}))},P=a(25),S=a(37),z=a(213),F=a.n(z),C=function(e){var t=e.noticeToEdit,a=e.history,n=e.activeMappedLeases,o=e.submitForm,s=F.a.parse(e.location.search).lease;s&&(t.lease_id=s);var d=t.id?"Edit Intent To Move Out":"Record Intent To Move Out";return i.a.createElement(c.a,{pageTitle:"Notice Details"},i.a.createElement(r.a,{container:!0,justify:"center",direction:"column"},i.a.createElement(r.a,{item:!0,key:1},i.a.createElement(l.a,{text:d})),i.a.createElement(r.a,{item:!0,key:2},i.a.createElement(x,{history:a,submitForm:o,activeLeases:n,noticeToEdit:t}))))};C=Object(o.b)((function(e,t){return{noticeToEdit:e.notices.find((function(e){return e.id===t.match.params.noticeId}))||{},activeMappedLeases:e.leases.filter((function(e){return!0!==e.terminated})).map((function(t){var a=e.contacts.find((function(e){var a=e.id;return!!Array.isArray(t.tenants)&&t.tenants.includes(a)}))||{};return Object.assign({},t,{tenant_name:"".concat(a.first_name," ").concat(a.last_name)})})).map((function(t){var a=e.propertyUnits.find((function(e){var a=e.id;return t.unit_id===a}))||{};return Object.assign({},t,{unit_ref:"".concat(a.ref)})}))}}),(function(e){return{submitForm:function(t,a){return e(Object(S.h)(t,a))}}}))(C);t.default=Object(P.g)(C)}}]);
//# sourceMappingURL=46.a7f79299.chunk.js.map