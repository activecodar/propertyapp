(this.webpackJsonppropetypro=this.webpackJsonppropetypro||[]).push([[42],{549:function(e,t,a){"use strict";a.d(t,"b",(function(){return h})),a.d(t,"e",(function(){return E})),a.d(t,"d",(function(){return v})),a.d(t,"p",(function(){return O})),a.d(t,"m",(function(){return j})),a.d(t,"n",(function(){return x})),a.d(t,"j",(function(){return k})),a.d(t,"i",(function(){return C})),a.d(t,"l",(function(){return w})),a.d(t,"o",(function(){return T})),a.d(t,"f",(function(){return B})),a.d(t,"h",(function(){return I})),a.d(t,"q",(function(){return q})),a.d(t,"c",(function(){return S})),a.d(t,"g",(function(){return D})),a.d(t,"k",(function(){return R})),a.d(t,"a",(function(){return F}));var r=a(512),n=a(513),i=a(514),o=a(515),l=a(572),c=a(573),u=a(574),s=a(575),m=Object(r.a)({start:Object(n.a)(Object(i.a)()),end:Object(o.a)(Object(i.a)())}),d=["Mr","Prof","Hon","Sir","Mrs","Miss","Dr","Madam","Other"],p=["Male","Female","Unspecified"],f=["Security Deposit Refund","Water Deposit Refund","Management Fees","Utilities","Taxes","Mortgage","Office","Maintenance & Cleaning","Advertising","Insurance","Legal & Other Professional Fees","Auto & Travel","Supplies","Other Refund","Repairs","Other"],y=["Bed Sitter","One Bedroom","Two Bedroom","Single Room","Double Room","Shop","Other"],g=["Fixed","Fixed w/rollover"],b=["Electric","Sewer","Water"],_=["Daily","Weekly","Monthly","Quarterly","Half-Yearly","Yearly"];function h(){return d}function E(){return p}function v(){return f}function O(){return y}function j(){for(var e=[],t=1;t<=5;t++)e.push(t);return e.concat("5+")}function x(){for(var e=[],t=1;t<=5;t++)e.push(t);return e}function k(){return b}function C(){return g}function w(){return _}function T(){return[{id:"month-to-date",text:"Month To Date"},{id:"last-month",text:"Last Month"},{id:"3-months-to-date",text:"3 Months To Date"},{id:"year-to-date",text:"Year To Date"},{id:"last-year",text:"Last Year"}]}function B(){return[Object(l.a)(Object(c.a)(Object(i.a)(),1)),Object(u.a)(Object(c.a)(Object(i.a)(),1))]}function I(){return[Object(n.a)(Object(s.a)(Object(i.a)(),1)),Object(o.a)(Object(s.a)(Object(i.a)(),1))]}function q(){return[Object(n.a)(Object(i.a)()),Object(i.a)()]}function S(){return[Object(l.a)(Object(i.a)()),Object(u.a)(Object(i.a)())]}function D(){return[Object(l.a)(Object(c.a)(Object(i.a)(),2)),Object(u.a)(Object(i.a)())]}function R(){return m}var F=new Intl.NumberFormat(void 0,{style:"decimal",currency:"KES"})},556:function(e,t,a){"use strict";a.d(t,"a",(function(){return p}));var r=a(0),n=a.n(r),i=a(199),o=a(526),l=a(129),c=a(527),u=a(529),s=a(453),m=a(64),d=Object(i.a)((function(e){return{root:{display:"flex",alignItems:"center",height:80,width:120},wrapper:{margin:e.spacing(1),position:"relative",height:50,width:50},buttonProgress:{color:l.a[500],position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12}}}));function p(e){var t=e.open,a=e.dialogTitle,r=d();return n.a.createElement(c.a,{maxWidth:"md","aria-labelledby":"simple-dialog-title",open:t},n.a.createElement(u.a,null,n.a.createElement(s.a,{container:!0,alignItems:"center",direction:"column"},n.a.createElement(s.a,{item:!0,lg:!0},n.a.createElement(m.a,null,a||"Saving...")),n.a.createElement(s.a,{item:!0,lg:!0},n.a.createElement("div",{className:r.root},n.a.createElement("div",{className:r.wrapper},t&&n.a.createElement(o.a,{size:50,className:r.buttonProgress})))))))}},562:function(e,t,a){"use strict";var r=a(14);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(0)),i=(0,r(a(15)).default)(n.default.createElement("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"}),"Delete");t.default=i},580:function(e,t,a){"use strict";var r=a(44),n=a(0),i=a.n(n),o=a(453),l=a(525),c=a(527),u=a(529),s=a(587);a(588);t.a=function(e){var t=e.open,a=e.selectedFile,m=e.setCroppedImageData,d=e.cropHeight,p=e.cropWidth,f=Object(n.useState)(),y=Object(r.a)(f,2),g=y[0],b=y[1],_=Object(n.useState)(),h=Object(r.a)(_,2),E=h[0],v=h[1],O=a,j=new FileReader;j.onloadend=function(){v(j.result)},j.readAsDataURL(O);var x=function(){m("")};return i.a.createElement(c.a,{open:t,onClose:x,"aria-labelledby":"form-dialog-title"},i.a.createElement(u.a,null,i.a.createElement(o.a,{container:!0,spacing:2},i.a.createElement(o.a,{item:!0},i.a.createElement(s.a,{style:{height:"100%",width:"100%"},initialAspectRatio:p===d?1:16/9,src:E,viewMode:.5,guides:!0,minCropBoxHeight:d,minCropBoxWidth:p,background:!1,responsive:!0,autoCropArea:.5,checkOrientation:!1,onInitialized:function(e){b(e)},cropBoxResizable:!1,data:{height:d,width:p}})),i.a.createElement(o.a,{item:!0,container:!0,justify:"center",direction:"row",spacing:2},i.a.createElement(o.a,{item:!0},i.a.createElement(l.a,{color:"secondary",variant:"contained",size:"medium",onClick:function(){return x()},disableElevation:!0},"Cancel")),i.a.createElement(o.a,{item:!0},i.a.createElement(l.a,{color:"primary",variant:"contained",size:"medium",onClick:function(){return function(){if("undefined"!==typeof g){var e=g.getCroppedCanvas().toDataURL();O.data=e,m(O)}}()}},"Crop Image"))))))}},699:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),i=a(453),o=a(203),l=a(202),c=a(41),u=a(10),s=a.n(u),m=a(20),d=a(64),p=a(524),f=a(541),y=a(525),g=a(557),b=a.n(g),_=a(558),h=a.n(_),E=a(562),v=a.n(E),O=a(450),j=a(534),x=a(589),k=a.n(x),C=a(556),w=a(208),T=a(55),B=a(37),I=a(46),q=a(580),S=a(25),D=a(549),R=a(19),F=R.e().shape({ref:R.g().trim().required("Property Name/Ref/Number is Required"),assigned_to:R.g().trim().required("Who will be the primary manager for this property"),address:R.g().trim().required("Property Address is Required"),postal_code:R.g().trim().default(""),city:R.g().default(""),property_units:R.a().of(R.e().shape({unit_type:R.g().trim().required("Unit Type is required"),beds:R.g().trim().required("Beds is required").default(""),ref:R.g().trim().required("Unit Ref/Number is required"),baths:R.g().trim().default(""),sqm:R.d().typeError("Square Footage must be a number").integer().min(0)}))}),W=Object(D.p)(),M=Object(D.n)(),N=Object(D.m)(),P=function(e){var t=Object(I.a)(),a=e.history,r=e.users,o=e.handleItemSubmit,l=e.propertyToEdit||{},c={id:l.id,assigned_to:l.assigned_to||"",city:l.city||"",postal_code:l.postal_code||"",address:l.address||"",ref:l.ref||"",property_units:[],owner:l.owner||"",property_image_url:l.property_image_url||""},u=function(e){var a=e.remove,r=e.push,o=e.replace,l=e.form,c=l.errors,u=l.touched,s=l.values,m=l.handleChange,d=l.handleBlur,g=c.property_units,b=u.property_units,_=s.property_units.map((function(e,r){var l=g&&g[r],c=b&&b[r];return n.a.createElement(i.a,{key:"property_unit-".concat(r),container:!0,item:!0,direction:"row",alignItems:"center",spacing:2},n.a.createElement(i.a,{xs:!0,item:!0,key:"property_units[".concat(r,"].ref")},n.a.createElement(f.a,{label:"Unit Number/Ref",variant:"outlined",type:"text",value:e.ref,name:"property_units.".concat(r,".ref"),onChange:m,onBlur:d,error:l&&"ref"in l&&c&&c.ref,helperText:c&&c.ref&&l&&l.ref})),n.a.createElement(i.a,{xs:!0,item:!0,key:"property_units[".concat(r,"].unit_type")},n.a.createElement(f.a,{fullWidth:!0,label:"Unit Type",defaultValue:"",variant:"outlined",select:!0,value:e.unit_type,name:"property_units.".concat(r,".unit_type"),onChange:m,onBlur:d,error:l&&"unit_type"in l&&c&&c.unit_type,helperText:c&&c.unit_type&&l&&l.unit_type},W.map((function(e,t){return n.a.createElement(p.a,{key:t,value:e},e)})))),n.a.createElement(i.a,{xs:!0,item:!0,key:"property_units[".concat(r,"].beds")},n.a.createElement(f.a,{fullWidth:!0,label:"Beds/Rooms",variant:"outlined",defaultValue:"",select:!0,value:e.beds,name:"property_units.".concat(r,".beds"),onChange:m,onBlur:d,error:l&&"beds"in l&&c&&c.beds,helperText:c&&c.beds&&l&&l.beds},M.map((function(e,t){return n.a.createElement(p.a,{key:t,value:e},e)})))),n.a.createElement(i.a,{xs:!0,item:!0,key:"property_units[".concat(r,"].baths")},n.a.createElement(f.a,{fullWidth:!0,label:"Baths",variant:"outlined",defaultValue:"",select:!0,value:e.baths,name:"property_units.".concat(r,".baths"),onChange:m,onBlur:d,error:l&&"baths"in l&&c&&c.baths,helperText:c&&c.baths&&l&&l.baths},N.map((function(e,t){return n.a.createElement(p.a,{key:t,value:e},e)})))),n.a.createElement(i.a,{item:!0,key:"property_units[".concat(r,"].image")},e.file_to_load_url&&n.a.createElement(q.a,{open:!0,selectedFile:e.file_to_load_url,setCroppedImageData:function(t){o(r,Object.assign({},e,{file_to_load_url:"",image:t}))},cropHeight:200,cropWidth:300}),n.a.createElement(j.a,null,n.a.createElement("input",{onChange:function(t){var a=t.currentTarget.files[0];o(r,Object.assign({},e,{file_to_load_url:a}))},accept:"image/*",className:t.fileInputDisplayNone,id:"icon-button-file-".concat(r),type:"file"}),n.a.createElement("label",{htmlFor:"icon-button-file-".concat(r)},n.a.createElement(O.a,{color:"primary","aria-label":"upload picture",component:"span"},n.a.createElement(k.a,null))),n.a.createElement(j.a,null,e.image?e.image.name:"No Image"))),n.a.createElement(i.a,{xs:!0,item:!0,key:"property_units[".concat(r,"].sqm")},n.a.createElement(f.a,{label:"Sqm",variant:"outlined",type:"text",value:e.sqm,name:"property_units.".concat(r,".sqm"),onChange:m,onBlur:d,error:l&&"sqm"in l&&c&&c.sqm,helperText:c&&c.sqm&&l&&l.sqm})),n.a.createElement(i.a,{item:!0,key:"property_units[".concat(r,"].delete")},n.a.createElement(O.a,{"aria-label":"delete",onClick:function(){a(r)},size:"medium"},n.a.createElement(v.a,null))))}));return n.a.createElement(i.a,{item:!0,container:!0,spacing:4,direction:"column"},_,n.a.createElement(i.a,{item:!0},n.a.createElement(y.a,{variant:"outlined",size:"medium",onClick:function(){return r({ref:"",unit_type:"",beds:"",baths:"",sqm:"",image:""})},disableElevation:!0},"Add Unit")))};return n.a.createElement(T.b,{initialValues:c,enableReinitialize:!0,validationSchema:F,onSubmit:function(){var e=Object(m.a)(s.a.mark((function e(t,r){var n,i,l,c,u;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.resetForm,i=r.setStatus,e.prev=1,l={id:t.id,assigned_to:t.assigned_to,city:t.city,postal_code:t.postal_code,address:t.address,ref:t.ref,owner:t.owner},!t.property_image||!t.property_image.data){e.next=11;break}if(!t.property_image_url){e.next=7;break}return e.next=7,Object(B.c)(t.property_image_url);case 7:return e.next=9,Object(B.t)(t.property_image);case 9:c=e.sent,l.property_image_url=c;case 11:return e.next=13,o(l,"properties");case 13:if(u=e.sent,t.id){e.next=17;break}return e.next=17,o({property_id:u,grace_period:0,late_fees_charges_activated:!1,automatically_end_agreement_on_move_out_date:!0,management_fee_type:"flat_fee",management_fee_flat_fee:0},"property-settings");case 17:t.property_units.forEach(function(){var e=Object(m.a)(s.a.mark((function e(a){var r,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.image||!a.image.data){e.next=6;break}return e.next=3,Object(B.t)(a.image);case 3:r=e.sent,a.unit_image_url=r,delete a.image;case 6:return n=Object.assign({},a,{property_id:u,property_ref:t.ref,assigned_to:t.assigned_to}),e.next=9,o(n,"property_units");case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n({}),t.id&&a.goBack(),i({sent:!0,msg:"Details saved successfully!"}),e.next=26;break;case 23:e.prev=23,e.t0=e.catch(1),i({sent:!1,msg:"Error! ".concat(e.t0,".")});case 26:case"end":return e.stop()}}),e,null,[[1,23]])})));return function(t,a){return e.apply(this,arguments)}}()},(function(e){var o=e.values,l=e.status,c=e.handleSubmit,g=e.touched,_=e.errors,E=e.handleChange,v=e.handleBlur,x=e.isSubmitting,I=e.setFieldValue;return n.a.createElement("form",{className:t.form,method:"post",id:"propertyInputForm",onSubmit:c},n.a.createElement(i.a,{container:!0,spacing:2,direction:"column"},l&&l.msg&&n.a.createElement(w.a,{variant:l.sent?"success":"error",message:l.msg}),x&&n.a.createElement(C.a,{open:!0}),n.a.createElement(i.a,{item:!0},n.a.createElement(f.a,{fullWidth:!0,variant:"outlined",type:"text",name:"ref",label:"Property Name/Ref",id:"ref",onBlur:v,onChange:E,value:o.ref,error:_.ref&&g.ref,helperText:g.ref&&_.ref})),n.a.createElement(i.a,{item:!0},n.a.createElement(d.a,{variant:"subtitle1"},"Street Address")),n.a.createElement(i.a,{item:!0},n.a.createElement(f.a,{fullWidth:!0,variant:"outlined",label:"Address",id:"address",type:"text",name:"address",value:o.address,onChange:E,onBlur:v,error:_.address&&g.address,helperText:g.address&&_.address})),n.a.createElement(i.a,{item:!0},n.a.createElement(f.a,{fullWidth:!0,variant:"outlined",id:"city",type:"text",name:"city",label:"City",value:o.city,onChange:E,onBlur:v})),n.a.createElement(i.a,{item:!0},n.a.createElement(f.a,{fullWidth:!0,label:"Postal Code",variant:"outlined",id:"postal_code",type:"text",name:"postal_code",value:o.postal_code,onChange:E,onBlur:v,error:_.postal_code&&g.postal_code,helperText:g.postal_code&&_.postal_code})),n.a.createElement(i.a,{item:!0},n.a.createElement(f.a,{fullWidth:!0,select:!0,variant:"outlined",id:"owner",name:"owner",label:"Property Owner",value:o.owner,onChange:E,onBlur:v,helperText:"Who is the Property Owner"},r.map((function(e,t){return n.a.createElement(p.a,{key:t,value:e.id},e.first_name," ",e.last_name)})))),n.a.createElement(i.a,{item:!0},n.a.createElement(f.a,{fullWidth:!0,select:!0,variant:"outlined",name:"assigned_to",id:"assigned_to",label:"Landlord",value:o.assigned_to,onChange:E,onBlur:v,error:_.assigned_to&&g.assigned_to,helperText:g.assigned_to&&_.assigned_to},r.map((function(e,t){return n.a.createElement(p.a,{key:t,value:e.id},e.first_name," ",e.last_name)})))),n.a.createElement(i.a,{item:!0,container:!0,direction:"row",justify:"flex-start",spacing:4,alignItems:"center"},n.a.createElement(i.a,{key:1,item:!0},o.file_to_load_url&&n.a.createElement(q.a,{open:!0,selectedFile:o.file_to_load_url,setCroppedImageData:function(e){I("file_to_load_url",""),I("property_image",e)},cropHeight:200,cropWidth:300}),n.a.createElement(j.a,null,o.property_image?o.property_image.name:"No Image")),n.a.createElement(i.a,{key:2,item:!0},n.a.createElement(j.a,null,n.a.createElement("input",{onChange:function(e){var t=e.currentTarget.files[0];I("file_to_load_url",t)},accept:"image/*",className:t.fileInputDisplayNone,id:"property-image-input",type:"file"}),n.a.createElement("label",{htmlFor:"property-image-input"},n.a.createElement(O.a,{size:"medium",color:"primary","aria-label":"upload picture",component:"span"},n.a.createElement(k.a,null))),o.property_image_url?n.a.createElement(y.a,{variant:"contained",onClick:Object(m.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(B.c)(o.property_image_url);case 2:I("property_image_url","");case 3:case"end":return e.stop()}}),e)})))},"Delete Image"):null))),o.id?null:n.a.createElement(i.a,{item:!0},n.a.createElement(d.a,{variant:"subtitle1",paragraph:!0},"Add Rental Units"),n.a.createElement(T.a,{name:"property_units",component:u})),n.a.createElement(i.a,{item:!0,container:!0,justify:"flex-start",direction:"row",className:t.buttonBox},n.a.createElement(i.a,{item:!0},n.a.createElement(y.a,{color:"secondary",variant:"contained",size:"medium",startIcon:n.a.createElement(h.a,null),onClick:function(){return a.goBack()},disableElevation:!0},"Cancel")),n.a.createElement(i.a,{item:!0},n.a.createElement(y.a,{type:"submit",color:"primary",variant:"contained",size:"medium",startIcon:n.a.createElement(b.a,null),form:"propertyInputForm",disabled:x},o.id?"Save Details":"Create Property")))))}))};P=Object(c.b)((function(e){return{properties:e.properties,propertiesMediaFiles:e.mediaFiles,error:e.error,currentUser:e.currentUser,users:e.users}}),(function(e){return{handleItemDelete:function(t,a){return e(Object(B.g)(t,a))},handleItemSubmit:function(t,a){return e(Object(B.h)(t,a))}}}))(P);var z=Object(S.g)(P),U=function(e){var t=e.propertyToEdit,a=t.id?"Edit Property":"Add Property";return n.a.createElement(l.a,{pageTitle:a},n.a.createElement(i.a,{container:!0,justify:"center",direction:"column"},n.a.createElement(i.a,{item:!0,key:2},n.a.createElement(o.a,{text:a})),n.a.createElement(i.a,{container:!0,direction:"column",justify:"center",item:!0,key:3},n.a.createElement(z,{propertyToEdit:t}))))};U=Object(c.b)((function(e,t){return{propertyToEdit:e.properties.find((function(e){return e.id===t.match.params.propertyId}))||{}}}))(U);t.default=Object(S.g)(U)}}]);
//# sourceMappingURL=42.cd406b80.chunk.js.map