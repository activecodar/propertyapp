(this.webpackJsonppropetypro=this.webpackJsonppropetypro||[]).push([[37],{550:function(e,t,a){"use strict";var n=a(44),r=a(0),l=a.n(r),i=a(36),c=a(534),o=a(450),d=a(666),u=a(665),s=a(662),m=a(667),p=a(713),b=a(571),f=a(664),E=a(663),h=a(562),g=a.n(h),v=a(555),y=a.n(v),_=a(554),j=a.n(_),x=a(25),C=a(576),O=a(661);var S=function(e){var t=e.classes,a=e.onSelectAllClick,n=e.order,r=e.orderBy,i=e.headCells,c=e.numSelected,o=e.rowCount,d=e.onRequestSort;return l.a.createElement(O.a,null,l.a.createElement(s.a,null,l.a.createElement(E.a,{padding:"checkbox"},l.a.createElement(b.a,{indeterminate:c>0&&c<o,checked:c===o,onChange:a,inputProps:{"aria-label":"select all"}})),i.map((function(e){return l.a.createElement(E.a,{key:e.id,align:e.numeric?"right":"left",padding:e.disablePadding?"none":"default",sortDirection:r===e.id&&n},l.a.createElement(C.a,{active:r===e.id,direction:n,onClick:(a=e.id,function(e){d(e,a)})},e.label,r===e.id?l.a.createElement("span",{className:t.visuallyHidden},"desc"===n?"sorted descending":"sorted ascending"):null));var a}))))},A=a(199),P=Object(A.a)((function(e){return{root:{width:"100%"},paper:{width:"100%",marginBottom:e.spacing(2)},table:{minWidth:750},visuallyHidden:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",top:20,width:1}}}));function k(e,t,a){return t[a]<e[a]?-1:t[a]>e[a]?1:0}t.a=Object(x.g)((function(e){var t=e.rows,a=e.headCells,r=e.selected,h=e.setSelected,v=e.deleteUrl,_=e.handleDelete,x=e.noEditCol,C=e.noDeleteCol,O=e.noDetailsCol,A=e.match,w=P(),R=l.a.useState("asc"),I=Object(n.a)(R,2),D=I[0],T=I[1],z=l.a.useState("Beds"),N=Object(n.a)(z,2),F=N[0],q=N[1],B=l.a.useState(0),W=Object(n.a)(B,2),U=W[0],M=W[1],H=l.a.useState(50),J=Object(n.a)(H,2),L=J[0],V=J[1];return l.a.createElement(c.a,{border:1,borderRadius:"borderRadius",borderColor:"grey.400"},l.a.createElement(f.a,null,l.a.createElement(u.a,{stickyHeader:!0,className:w.table,"aria-labelledby":"tableTitle",size:"medium","aria-label":"enhanced table"},l.a.createElement(S,{classes:w,numSelected:r.length,order:D,orderBy:F,onSelectAllClick:function(e){if(e.target.checked){var a=t.map((function(e){return e.id}));h(a)}else h([])},headCells:a,onRequestSort:function(e,t){T(F===t&&"desc"===D?"asc":"desc"),q(t)},rowCount:t.length}),l.a.createElement(d.a,null,function(e,t){var a=e.map((function(e,t){return[e,t]}));return a.sort((function(e,a){var n=t(e[0],a[0]);return 0!==n?n:e[1]-a[1]})),a.map((function(e){return e[0]}))}(t,function(e,t){return"desc"===e?function(e,a){return k(e,a,t)}:function(e,a){return-k(e,a,t)}}(D,F)).slice(U*L,U*L+L).map((function(e,t){var n,c=(n=e.id,-1!==r.indexOf(n)),d="enhanced-table-checkbox-".concat(t);return l.a.createElement(s.a,{hover:!0,role:"checkbox","aria-checked":c,tabIndex:-1,key:e.id,selected:c},l.a.createElement(E.a,{padding:"checkbox"},l.a.createElement(b.a,{onClick:function(t){return function(e,t){e.stopPropagation();var a=r.indexOf(t),n=[];-1===a?n=n.concat(r,t):0===a?n=n.concat(r.slice(1)):a===r.length-1?n=n.concat(r.slice(0,-1)):a>0&&(n=n.concat(r.slice(0,a),r.slice(a+1))),h(n)}(t,e.id)},checked:c,inputProps:{"aria-labelledby":d}})),a.map((function(t,a){var n=e[t.id];return"edit"===t.id?x?null:l.a.createElement(E.a,{key:"edit".concat(a),component:"th",scope:"row",sortDirection:!1},l.a.createElement(m.a,{title:"Edit",placement:"bottom"},l.a.createElement(o.a,{color:"primary",size:"small",component:i.b,to:"".concat(A.url,"/").concat(e.id,"/edit")},l.a.createElement(y.a,{fontSize:"default"})))):"delete"===t.id?C?null:l.a.createElement(E.a,{key:"delete".concat(a),component:"th",scope:"row",sortDirection:!1},l.a.createElement(m.a,{title:"Delete",placement:"bottom"},l.a.createElement(o.a,{onClick:function(t){_(e.id,v)},color:"primary",size:"small"},l.a.createElement(g.a,{fontSize:"default"})))):"details"===t.id?O?l.a.createElement(E.a,{key:"details".concat(a),component:"th",scope:"row",sortDirection:!1},l.a.createElement(m.a,{title:"Details",placement:"bottom"},l.a.createElement(o.a,{color:"primary",size:"small",component:i.b,to:"".concat(A.url,"/").concat(e.id,"/details")},l.a.createElement(j.a,{fontSize:"default"})))):null:l.a.createElement(E.a,{key:a,component:"th",id:d,scope:"row",padding:"none"},"boolean"===typeof n?n?"Yes":"No":n)})))}))))),l.a.createElement(p.a,{rowsPerPageOptions:[50,100,200,300],component:"div",count:t.length,rowsPerPage:L,page:U,onChangePage:function(e,t){M(t)},onChangeRowsPerPage:function(e){V(parseInt(e.target.value,10)),M(0)}}))}))},551:function(e,t,a){"use strict";a.d(t,"a",(function(){return d}));var n=a(525),r=a(0),l=a.n(r),i=a(207),c=a.n(i),o=a(201);function d(e){var t=e.displayText,a=e.disabled,r=e.reportName,i=e.reportTitle,d=e.headCells,u=e.dataToPrint;return l.a.createElement(n.a,{type:"button","aria-label":"Export to Excel",variant:"contained",size:"medium",color:"primary",disabled:a,onClick:function(){return Object(o.c)(r,i,d,u,r)},startIcon:l.a.createElement(c.a,null)},t||"Excel")}t.b=function(e){var t=e.disabled,a=e.reportName,r=e.reportTitle,i=e.headCells,d=e.dataToPrint;return l.a.createElement(n.a,{type:"button","aria-label":"Export to Excel",variant:"contained",size:"medium",color:"primary",disabled:t,onClick:function(){return Object(o.a)(a,r,i,d,a)},startIcon:l.a.createElement(c.a,null)},"Excel")}},561:function(e,t,a){"use strict";var n=a(525),r=a(0),l=a.n(r),i=a(560),c=a.n(i),o=a(201);t.a=function(e){var t=e.disabled,a=e.reportName,r=e.reportTitle,i=e.headCells,d=e.dataToPrint;return l.a.createElement(n.a,{type:"button","aria-label":"Print to Pdf",variant:"contained",size:"medium",color:"primary",disabled:t,onClick:function(){return Object(o.d)(a,r,i,d)},startIcon:l.a.createElement(c.a,null)},"Pdf")}},583:function(e,t,a){"use strict";var n=a(10),r=a.n(n),l=a(20),i=a(525),c=a(0),o=a.n(c),d=a(584),u=a.n(d),s=a(201),m=a(37),p=a(41);t.a=Object(p.b)(null,(function(e){return{handleItemSubmit:function(t,a){return e(Object(m.h)(t,a))}}}))((function(e){var t=e.disabled,a=e.text,n=e.savingUrl,c=e.baseObjectToAddProperties,d=e.handleItemSubmit;return o.a.createElement("div",null,o.a.createElement("input",{accept:".xls,.xlsx, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,application/vnd.ms-excel",style:{display:"none"},id:"contained-button-file",type:"file",onChange:function(e){var t=e.target.files;if(t.length){var a=t[0],i=new FileReader;i.onload=function(e){var t=e.target.result;Object(s.g)(t).forEach(function(){var e=Object(l.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c&&Object.assign(t,c),e.next=3,d(t,n);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},i.readAsBinaryString(a)}}}),o.a.createElement("label",{htmlFor:"contained-button-file"},o.a.createElement(i.a,{variant:"contained",color:"primary",component:"span",disabled:t,startIcon:o.a.createElement(u.a,null)},a||"Upload")))}))},701:function(e,t,a){"use strict";a.r(t);var n=a(44),r=a(202),l=a(453),i=a(203),c=a(0),o=a.n(c),d=a(524),u=a(534),s=a(525),m=a(541),p=a(555),b=a.n(p),f=a(205),E=a.n(f),h=a(553),g=a.n(h),v=a(624),y=a.n(v),_=a(559),j=a.n(_),x=a(551),C=a(41),O=a(37),S=a(550),A=a(25),P=a(36),k=a(46),w=a(583),R=a(561),I=a(10),D=a.n(I),T=a(20),z=a(557),N=a.n(z),F=a(558),q=a.n(F),B=a(527),W=a(528),U=a(529),M=a(520),H=a(596),J=a(521),L=a(600),V=a(599),Y=a(208),G=a(19),K=a(55),Q=G.e().shape({increase_or_decrease:G.g().trim().required("Adjust choice is Required"),adjust_method:G.g().trim().required("Method is required"),fixed_adjust_amount:G.d().typeError("Amount must be a number").when("adjust_method",{is:"fixed_amount",then:G.d().min(0).required("Amount is required")}),adjust_percentage:G.d().typeError("Percentage must be a number").when("adjust_method",{is:"percentage",then:G.d().min(0).max(100,"Percentage must be less <= 100").required("Percentage is required")})});function X(e){var t=Object(k.a)(),a=e.leasesToAdjustRentAmounts,n=e.open,r=e.handleClose,i=e.handleItemSubmit;return o.a.createElement(B.a,{fullWidth:!0,maxWidth:"sm",open:n,onClose:r,"aria-labelledby":"form-dialog-title"},o.a.createElement(W.a,{id:"alert-dialog-title"}," Adjust Rent Amounts"),o.a.createElement(U.a,null,o.a.createElement(K.b,{initialValues:{increase_or_decrease:"increase",adjust_method:"fixed_amount",adjust_percentage:"",fixed_adjust_amount:""},validationSchema:Q,onSubmit:function(){var e=Object(T.a)(D.a.mark((function e(t,n){var l,c;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:l=n.resetForm,c=n.setStatus;try{a.forEach(function(){var e=Object(T.a)(D.a.mark((function e(a){var n,r,l,c;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=parseFloat(a.rent_amount)||0,r=0,r="percentage"===t.adjust_method?n*t.adjust_percentage/100:parseFloat(t.fixed_adjust_amount),l="increase"===t.increase_or_decrease?n+r:n-r,c=Object.assign({},a,{rent_amount:l}),e.next=7,i(c,"leases");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),l({}),c({sent:!0,msg:"Rent Amounts Adjusted Successfully!"}),r()}catch(o){c({sent:!1,msg:"Error! ".concat(o,".")})}case 2:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()},(function(e){var a=e.values,n=e.status,i=e.handleSubmit,c=e.touched,d=e.errors,u=e.handleChange,p=e.handleBlur,b=e.isSubmitting;return o.a.createElement("form",{className:t.form,method:"post",id:"rentAdjustForm",onSubmit:i},o.a.createElement(l.a,{container:!0,direction:"column",spacing:2},n&&n.msg&&o.a.createElement(Y.a,{variant:n.sent?"success":"error",message:n.msg}),o.a.createElement(l.a,{container:!0,item:!0,direction:"column",spacing:2},o.a.createElement(l.a,{item:!0},o.a.createElement(M.a,{component:"fieldset"},o.a.createElement(J.a,{component:"legend"},"Increase/Decrease Rent Amount"),o.a.createElement(L.a,{"aria-label":"Increase or Decrease",name:"increase_or_decrease",value:a.increase_or_decrease,onChange:u},o.a.createElement(H.a,{value:"increase",control:o.a.createElement(V.a,null),label:"Increase"}),o.a.createElement(H.a,{value:"decrease",control:o.a.createElement(V.a,null),label:"Decrease"})))),o.a.createElement(l.a,{item:!0},o.a.createElement(M.a,{component:"fieldset"},o.a.createElement(J.a,{component:"legend"},"Adjust Rent Amount By"),o.a.createElement(L.a,{"aria-label":"Adjust Method",name:"adjust_method",value:a.adjust_method,onChange:u},o.a.createElement(H.a,{value:"fixed_amount",control:o.a.createElement(V.a,null),label:"Fixed Amount"}),o.a.createElement(H.a,{value:"percentage",control:o.a.createElement(V.a,null),label:"Percentage"})))),o.a.createElement(l.a,{item:!0,xs:12,md:!0},"fixed_amount"===a.adjust_method?o.a.createElement(m.a,{fullWidth:!0,label:"Amount to Adjust Rent",variant:"outlined",type:"text",value:a.fixed_adjust_amount,id:"fixed_adjust_amount",name:"fixed_adjust_amount",onChange:u,onBlur:p,error:d.fixed_adjust_amount&&c.fixed_adjust_amount,helperText:c.fixed_adjust_amount&&d.fixed_adjust_amount}):o.a.createElement(m.a,{fullWidth:!0,label:"Percentage to Adjust Rent",variant:"outlined",type:"text",value:a.adjust_percentage,name:"adjust_percentage",onChange:u,onBlur:p,error:d.adjust_percentage&&c.adjust_percentage,helperText:c.adjust_percentage&&d.adjust_percentage}))),o.a.createElement(l.a,{item:!0,container:!0,direction:"row",className:t.buttonBox},o.a.createElement(l.a,{item:!0},o.a.createElement(s.a,{color:"secondary",variant:"contained",size:"medium",startIcon:o.a.createElement(q.a,null),onClick:function(){r()},disableElevation:!0},"Cancel")),o.a.createElement(l.a,{item:!0},o.a.createElement(s.a,{type:"submit",color:"primary",variant:"contained",size:"medium",startIcon:o.a.createElement(N.a,null),form:"rentAdjustForm",disabled:b},"Adjust Rent")))))}))))}var Z=a(536),$=[{id:"property_ref",numeric:!1,disablePadding:!0,label:"Property"},{id:"unit_ref",numeric:!1,disablePadding:!0,label:"Unit"},{id:"lease_type",numeric:!1,disablePadding:!0,label:"Agreement Type"},{id:"rent_cycle",numeric:!1,disablePadding:!0,label:"Rent Cycle"},{id:"tenant_name",numeric:!1,disablePadding:!0,label:"Tenant Name"},{id:"tenant_id_number",numeric:!1,disablePadding:!0,label:"Tenant ID"},{id:"start_date",numeric:!1,disablePadding:!0,label:"Start Date"},{id:"end_date",numeric:!1,disablePadding:!0,label:"End Date"},{id:"security_deposit",numeric:!1,disablePadding:!0,label:"Deposit Held"},{id:"rent_amount",numeric:!1,disablePadding:!0,label:"Rent"},{id:"edit",numeric:!1,disablePadding:!0,label:"Edit"},{id:"delete",numeric:!1,disablePadding:!0,label:"Delete"}],ee=function(e){var t=e.leases,a=e.properties,p=e.match,f=e.history,h=e.handleItemSubmit,v=e.handleItemDelete,_=Object(k.a)(),C=Object(c.useState)([]),O=Object(n.a)(C,2),A=O[0],I=O[1],D=Object(c.useState)([]),T=Object(n.a)(D,2),z=T[0],N=T[1],F=Object(c.useState)("all"),q=Object(n.a)(F,2),B=q[0],W=q[1],U=Object(c.useState)("all"),M=Object(n.a)(U,2),H=M[0],J=M[1],L=Object(c.useState)(""),V=Object(n.a)(L,2),Y=V[0],G=V[1],K=Object(c.useState)(""),Q=Object(n.a)(K,2),Z=Q[0],ee=Q[1],te=Object(c.useState)([]),ae=Object(n.a)(te,2),ne=ae[0],re=ae[1],le=Object(c.useState)(!1),ie=Object(n.a)(le,2),ce=ie[0],oe=ie[1];Object(c.useEffect)((function(){I(t),N(t)}),[t]);var de=function(e){e.preventDefault();var t=A.filter((function(e){var t=e.start_date;return!Y||t>=Y})).filter((function(e){var t=e.end_date;return!Z||!!t&&t<=Z})).filter((function(e){var t=e.property_id;return"all"===B||t===B})).filter((function(e){var t=e.terminated;return"all"===H||("undefined"===typeof t||t===H)}));N(t)},ue=function(){oe(!ce)};return o.a.createElement(r.a,{pageTitle:"Rental Agreements"},o.a.createElement(l.a,{container:!0,spacing:3,alignItems:"center"},o.a.createElement(l.a,{item:!0,key:2},o.a.createElement(i.a,{text:"Rental Agreements"})),o.a.createElement(l.a,{container:!0,spacing:2,item:!0,alignItems:"center",direction:"row",key:1},o.a.createElement(l.a,{item:!0},o.a.createElement(s.a,{type:"button",color:"primary",variant:"contained",size:"medium",startIcon:o.a.createElement(j.a,null),component:P.b,to:"".concat(p.url,"/new")},"NEW")),o.a.createElement(l.a,{item:!0},o.a.createElement(s.a,{type:"button",color:"primary",variant:"contained",size:"medium",startIcon:o.a.createElement(b.a,null),disabled:!ne.length,component:P.b,to:"".concat(p.url,"/").concat(ne[0],"/edit")},"Edit")),o.a.createElement(l.a,{item:!0},o.a.createElement(s.a,{type:"button",color:"primary",variant:"contained",size:"medium",disabled:!ne.length,onClick:ue},"Adjust Rent Amounts")),o.a.createElement(l.a,{item:!0},o.a.createElement(s.a,{type:"button",color:"primary",variant:"contained",size:"medium",startIcon:o.a.createElement(y.a,null),disabled:!ne.length,component:P.b,to:"/app/notices/new?lease=".concat(ne[0])},"End Agreement")),o.a.createElement(l.a,{item:!0},o.a.createElement(R.a,{disabled:!ne.length,reportName:"Rental Agreements Records",reportTitle:"Rental Agreements Data",headCells:$,dataToPrint:A.filter((function(e){var t=e.id;return ne.includes(t)}))})),o.a.createElement(l.a,{item:!0},o.a.createElement(x.b,{disabled:!ne.length,reportName:"Rental Agreements Records",reportTitle:"Rental Agreements Data",headCells:$,dataToPrint:A.filter((function(e){var t=e.id;return ne.includes(t)}))})),o.a.createElement(l.a,{item:!0},o.a.createElement(w.a,{disabled:1!=ne.length,savingUrl:"transactions-charges",text:"Upload Rent Charges",baseObjectToAddProperties:function(){var e=A.find((function(e){return e.id===ne[0]}))||{},t=e.tenants;return{unit_id:e.unit_id,property_id:e.property_id,tenant_id:Array.isArray(t)?t[0]:"",charge_type:"rent",charge_label:"Rent"}}()}))),o.a.createElement(l.a,{item:!0,xs:12},o.a.createElement(u.a,{border:1,borderRadius:"borderRadius",borderColor:"grey.400"},o.a.createElement("form",{className:_.form,id:"contactSearchForm",onSubmit:de},o.a.createElement(l.a,{container:!0,spacing:2,justify:"center",direction:"row"},o.a.createElement(l.a,{item:!0,xs:12,md:6},o.a.createElement(m.a,{fullWidth:!0,select:!0,variant:"outlined",id:"lease_status",name:"lease_status",label:"Agreement Status",value:H,onChange:function(e){J(e.target.value)}},o.a.createElement(d.a,{key:"all",value:"all"},"All"),o.a.createElement(d.a,{key:"active",value:!1},"Active"),o.a.createElement(d.a,{key:"in-active",value:!0},"In-Active"))),o.a.createElement(l.a,{item:!0,xs:12,md:6},o.a.createElement(m.a,{fullWidth:!0,select:!0,variant:"outlined",name:"property_filter",label:"Select Property",id:"property_filter",onChange:function(e){W(e.target.value)},value:B},o.a.createElement(d.a,{key:"all",value:"all"},"All Properties"),a.map((function(e,t){return o.a.createElement(d.a,{key:t,value:e.id},e.ref)}))))),o.a.createElement(l.a,{container:!0,spacing:2,justify:"center",direction:"row"},o.a.createElement(l.a,{item:!0,xs:12,md:6},o.a.createElement(m.a,{fullWidth:!0,variant:"outlined",type:"date",id:"from_date_filter",name:"from_date_filter",label:"From Date",value:Y,onChange:function(e){G(e.target.value)},InputLabelProps:{shrink:!0}})),o.a.createElement(l.a,{item:!0,xs:12,md:6},o.a.createElement(m.a,{fullWidth:!0,variant:"outlined",type:"date",name:"to_date_filter",label:"To Date",id:"to_date_filter",onChange:function(e){ee(e.target.value)},value:Z,InputLabelProps:{shrink:!0}}))),o.a.createElement(l.a,{container:!0,spacing:2,item:!0,justify:"flex-end",alignItems:"center",direction:"row",key:1},o.a.createElement(l.a,{item:!0},o.a.createElement(s.a,{onClick:function(e){return de(e)},type:"submit",form:"contactSearchForm",color:"primary",variant:"contained",size:"medium",startIcon:o.a.createElement(E.a,null)},"SEARCH")),o.a.createElement(l.a,{item:!0},o.a.createElement(s.a,{onClick:function(e){return function(e){e.preventDefault(),N(A),W("all"),J("all"),G(""),ee("")}(e)},type:"reset",form:"contactSearchForm",color:"primary",variant:"contained",size:"medium",startIcon:o.a.createElement(g.a,null)},"RESET")))))),ce?o.a.createElement(X,{open:ce,leasesToAdjustRentAmounts:A.filter((function(e){var t=e.id;return ne.includes(t)})),handleClose:ue,history:f,handleItemSubmit:h}):null,o.a.createElement(l.a,{item:!0,xs:12},o.a.createElement(S.a,{selected:ne,setSelected:re,rows:z,headCells:$,handleDelete:v,deleteUrl:"leases"}))))};ee=Object(C.b)((function(e){return{leases:e.leases.map((function(t){var a=e.contacts.find((function(e){return e.id===t.tenants[0]}))||{},n=e.properties.find((function(e){return e.id===t.property_id}))||{},r=e.propertyUnits.find((function(e){return e.id===t.unit_id}))||{};return Object.assign({},t,{tenant_name:a.first_name+" "+a.last_name,tenant_id_number:a.id_number,property_ref:n.ref,unit_ref:r.ref})})).sort((function(e,t){return Object(Z.a)(t.start_date,"yyyy-MM-dd",new Date)-Object(Z.a)(e.start_date,"yyyy-MM-dd",new Date)})),properties:e.properties}}),(function(e){return{handleItemSubmit:function(t,a){return e(Object(O.h)(t,a))},handleItemDelete:function(t,a){return e(Object(O.g)(t,a))}}}))(ee);t.default=Object(A.g)(ee)}}]);
//# sourceMappingURL=37.f0f6ab0c.chunk.js.map