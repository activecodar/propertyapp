(this.webpackJsonppropetypro=this.webpackJsonppropetypro||[]).push([[20],{545:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var n=a(17),r=a(9),i=a(7);function c(e,t){Object(i.a)(2,arguments);var a=Object(r.a)(e),c=Object(n.a)(t);if(isNaN(c))return new Date(NaN);if(!c)return a;var u=a.getDate(),l=new Date(a.getTime());l.setMonth(a.getMonth()+c+1,0);var o=l.getDate();return u>=o?l:(a.setFullYear(l.getFullYear(),l.getMonth(),u),a)}},549:function(e,t,a){"use strict";a.d(t,"b",(function(){return b})),a.d(t,"e",(function(){return E})),a.d(t,"d",(function(){return v})),a.d(t,"p",(function(){return O})),a.d(t,"m",(function(){return j})),a.d(t,"n",(function(){return x})),a.d(t,"j",(function(){return C})),a.d(t,"i",(function(){return w})),a.d(t,"l",(function(){return D})),a.d(t,"o",(function(){return S})),a.d(t,"f",(function(){return T})),a.d(t,"h",(function(){return q})),a.d(t,"q",(function(){return k})),a.d(t,"c",(function(){return A})),a.d(t,"g",(function(){return I})),a.d(t,"k",(function(){return P})),a.d(t,"a",(function(){return R}));var n=a(512),r=a(513),i=a(514),c=a(515),u=a(572),l=a(573),o=a(574),d=a(575),s=Object(n.a)({start:Object(r.a)(Object(i.a)()),end:Object(c.a)(Object(i.a)())}),m=["Mr","Prof","Hon","Sir","Mrs","Miss","Dr","Madam","Other"],p=["Male","Female","Unspecified"],_=["Security Deposit Refund","Water Deposit Refund","Management Fees","Utilities","Taxes","Mortgage","Office","Maintenance & Cleaning","Advertising","Insurance","Legal & Other Professional Fees","Auto & Travel","Supplies","Other Refund","Repairs","Other"],h=["Bed Sitter","One Bedroom","Two Bedroom","Single Room","Double Room","Shop","Other"],f=["Fixed","Fixed w/rollover"],y=["Electric","Sewer","Water"],g=["Daily","Weekly","Monthly","Quarterly","Half-Yearly","Yearly"];function b(){return m}function E(){return p}function v(){return _}function O(){return h}function j(){for(var e=[],t=1;t<=5;t++)e.push(t);return e.concat("5+")}function x(){for(var e=[],t=1;t<=5;t++)e.push(t);return e}function C(){return y}function w(){return f}function D(){return g}function S(){return[{id:"month-to-date",text:"Month To Date"},{id:"last-month",text:"Last Month"},{id:"3-months-to-date",text:"3 Months To Date"},{id:"year-to-date",text:"Year To Date"},{id:"last-year",text:"Last Year"}]}function T(){return[Object(u.a)(Object(l.a)(Object(i.a)(),1)),Object(o.a)(Object(l.a)(Object(i.a)(),1))]}function q(){return[Object(r.a)(Object(d.a)(Object(i.a)(),1)),Object(c.a)(Object(d.a)(Object(i.a)(),1))]}function k(){return[Object(r.a)(Object(i.a)()),Object(i.a)()]}function A(){return[Object(u.a)(Object(i.a)()),Object(o.a)(Object(i.a)())]}function I(){return[Object(u.a)(Object(l.a)(Object(i.a)(),2)),Object(o.a)(Object(i.a)())]}function P(){return s}var R=new Intl.NumberFormat(void 0,{style:"decimal",currency:"KES"})},556:function(e,t,a){"use strict";a.d(t,"a",(function(){return p}));var n=a(0),r=a.n(n),i=a(199),c=a(526),u=a(129),l=a(527),o=a(529),d=a(453),s=a(64),m=Object(i.a)((function(e){return{root:{display:"flex",alignItems:"center",height:80,width:120},wrapper:{margin:e.spacing(1),position:"relative",height:50,width:50},buttonProgress:{color:u.a[500],position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12}}}));function p(e){var t=e.open,a=e.dialogTitle,n=m();return r.a.createElement(l.a,{maxWidth:"md","aria-labelledby":"simple-dialog-title",open:t},r.a.createElement(o.a,null,r.a.createElement(d.a,{container:!0,alignItems:"center",direction:"column"},r.a.createElement(d.a,{item:!0,lg:!0},r.a.createElement(s.a,null,a||"Saving...")),r.a.createElement(d.a,{item:!0,lg:!0},r.a.createElement("div",{className:n.root},r.a.createElement("div",{className:n.wrapper},t&&r.a.createElement(c.a,{size:50,className:n.buttonProgress})))))))}},557:function(e,t,a){"use strict";var n=a(14);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(0)),i=(0,n(a(15)).default)(r.default.createElement("path",{d:"M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7l-4-4zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm3-10H5V5h10v4z"}),"Save");t.default=i},558:function(e,t,a){"use strict";var n=a(14);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(0)),i=(0,n(a(15)).default)(r.default.createElement("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"}),"Cancel");t.default=i},559:function(e,t,a){"use strict";var n=a(14);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(0)),i=(0,n(a(15)).default)(r.default.createElement("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"}),"Add");t.default=i},572:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var n=a(9),r=a(7);function i(e){Object(r.a)(1,arguments);var t=Object(n.a)(e);return t.setDate(1),t.setHours(0,0,0,0),t}},573:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var n=a(17),r=a(545),i=a(7);function c(e,t){Object(i.a)(2,arguments);var a=Object(n.a)(t);return Object(r.a)(e,-a)}},574:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var n=a(9),r=a(7);function i(e){Object(r.a)(1,arguments);var t=Object(n.a)(e),a=t.getMonth();return t.setFullYear(t.getFullYear(),a+1,0),t.setHours(23,59,59,999),t}},575:function(e,t,a){"use strict";a.d(t,"a",(function(){return u}));var n=a(17),r=a(545),i=a(7);function c(e,t){Object(i.a)(2,arguments);var a=Object(n.a)(t);return Object(r.a)(e,12*a)}function u(e,t){Object(i.a)(2,arguments);var a=Object(n.a)(t);return c(e,-a)}},590:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#d5d5d5",A200:"#aaaaaa",A400:"#303030",A700:"#616161"};t.default=n},691:function(e,t,a){"use strict";a.r(t);var n=a(11),r=a(0),i=a.n(r),c=a(453),u=a(203),l=a(202),o=a(41),d=a(37),s=a(97),m=a(10),p=a.n(m),_=a(20),h=a(44),f=a(6),y=a(665),g=a(666),b=a(663),E=a(664),v=a(661),O=a(713),j=a(662),x=a(179),C=a(667),w=a(450),D=a(562),S=a.n(D),T=a(555),q=a.n(T),k=a(590),A=a.n(k),I=Object(f.a)((function(e){return{head:{backgroundColor:A.a[600],color:e.palette.common.white},body:{fontSize:14}}}))(b.a),P=Object(f.a)((function(e){return{root:{"&:nth-of-type(odd)":{backgroundColor:e.palette.action.hover}}}}))(j.a);function R(e){var t=e.headCells;return i.a.createElement(v.a,null,i.a.createElement(j.a,null,t.map((function(e,t){return i.a.createElement(I,{key:t},e.label)}))))}function M(e){var t=e.rows,a=e.headCells,n=e.handleDelete,r=e.handleEditClick,c=i.a.useState(0),u=Object(h.a)(c,2),l=u[0],o=u[1],d=i.a.useState(5),s=Object(h.a)(d,2),m=s[0],p=s[1],_=m-Math.min(m,t.length-l*m);return i.a.createElement("div",null,i.a.createElement(E.a,{component:x.a},i.a.createElement(y.a,{stickyHeader:!0,"aria-labelledby":"tableTitle",size:"medium","aria-label":"enhanced table"},i.a.createElement(R,{headCells:a,rowCount:t.length}),i.a.createElement(g.a,null,t.slice(l*m,l*m+m).map((function(e,t){return i.a.createElement(P,{key:"row".concat(t)},a.map((function(a,c){var u=e[a.id];return"edit"===a.id?i.a.createElement(b.a,{component:"th",scope:"row",sortDirection:!1,key:"edit".concat(c)},i.a.createElement(C.a,{title:"Edit",placement:"bottom"},i.a.createElement(w.a,{onClick:function(e){r(t)},color:"primary",size:"small"},i.a.createElement(q.a,{fontSize:"default"})))):"delete"===a.id?i.a.createElement(b.a,{component:"th",scope:"row",sortDirection:!1,key:"delete".concat(c)},i.a.createElement(C.a,{title:"Delete",placement:"bottom"},i.a.createElement(w.a,{onClick:function(e){n(t)},color:"primary",size:"small"},i.a.createElement(S.a,{fontSize:"default"})))):i.a.createElement(I,{component:"th",scope:"row",key:"other".concat(c)},u||"One time")})))})),_>0&&i.a.createElement(j.a,{style:{height:53*_}},i.a.createElement(b.a,{colSpan:6}))))),i.a.createElement(O.a,{rowsPerPageOptions:[5],component:"div",count:t.length,rowsPerPage:m,page:l,onChangePage:function(e,t){o(t)},onChangeRowsPerPage:function(e){p(10),o(0)}}))}var W=a(524),B=a(541),F=a(525),N=a(557),z=a.n(N),U=a(558),L=a.n(U),H=a(527),V=a(529),Y=a(208),J=a(19),K=a(55),Q=a(549),G=a(46),X=a(528),Z=a(556),$=Object(Q.l)(),ee=[{id:"one_time_charge",name:"One Time Charge"},{id:"recurring_charge",name:"Recurring Charge"}],te=J.e().shape({type:J.g().trim().required("Charge Type is Required"),due_date:J.c().required("Due Date is required"),charge_label:J.g().trim().required("Charge Name is required"),frequency:J.g().trim().when("type",{is:"recurring_charge",then:J.g().required("Frequency to make charge is required")}),amount:J.d().typeError("Amount must be a number").positive("Amount must be a positive number").required("Charge Amount is required")});function ae(e){var t=Object(G.a)(),a=e.open,n=e.handleClose,r=e.handleItemSubmit,u=e.chargeValues;return i.a.createElement(H.a,{fullWidth:!0,maxWidth:"sm",open:a,onClose:n,"aria-labelledby":"form-dialog-title"},i.a.createElement(X.a,null,u.charge_label?"Edit Charge":"Add Charge"),i.a.createElement(V.a,null,i.a.createElement(K.b,{initialValues:u,validationSchema:te,onSubmit:function(){var e=Object(_.a)(p.a.mark((function e(t,a){var i,c,u;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=a.resetForm,c=a.setStatus,e.prev=1,u={id:t.id,property_id:t.property_id,unit_id:t.unit_id,charge_label:t.charge_label,type:t.type,amount:t.amount,due_date:t.due_date,frequency:t.frequency},e.next=5,r(u,"unit-charges");case 5:i({type:t.type}),c({sent:!0,msg:"Unit charge saved successfully"}),t.id&&n(),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),c({sent:!1,msg:"Error! ".concat(e.t0,".")});case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t,a){return e.apply(this,arguments)}}()},(function(e){var a=e.values,r=e.status,u=e.handleSubmit,l=e.touched,o=e.errors,d=e.handleChange,s=e.handleBlur,m=e.isSubmitting;return i.a.createElement("form",{className:t.form,method:"post",id:"chargeInputForm",onSubmit:u},i.a.createElement(c.a,{container:!0,direction:"column",spacing:2},r&&r.msg&&i.a.createElement(Y.a,{variant:r.sent?"success":"error",message:r.msg}),m&&i.a.createElement(Z.a,{open:!0}),i.a.createElement(c.a,{container:!0,item:!0,direction:"column",spacing:2},i.a.createElement(c.a,{item:!0,xs:12,md:!0},i.a.createElement(B.a,{fullWidth:!0,variant:"outlined",select:!0,name:"type",label:"Charge Type",onBlur:s,onChange:d,value:a.type,error:o.type&&l.type,helperText:l.type&&o.type},ee.map((function(e,t){return i.a.createElement(W.a,{key:t,value:e.id},e.name)})))),i.a.createElement(c.a,{item:!0,xs:12,md:!0},i.a.createElement(B.a,{fullWidth:!0,label:"Charge Name",variant:"outlined",type:"text",value:a.charge_label,name:"charge_label",onChange:d,onBlur:s,error:o.charge_label&&l.charge_label,helperText:l.charge_label&&o.charge_label})),i.a.createElement(c.a,{item:!0,xs:12,md:!0},i.a.createElement(B.a,{fullWidth:!0,variant:"outlined",id:"due_date",type:"date",name:"due_date",label:"Next Due Date",value:a.due_date,onChange:d,onBlur:s,InputLabelProps:{shrink:!0},error:o.due_date&&l.due_date,helperText:l.due_date&&o.due_date})),i.a.createElement(c.a,{item:!0,xs:12,md:!0},i.a.createElement(B.a,{fullWidth:!0,label:"Amount",variant:"outlined",type:"text",value:a.amount,name:"amount",onChange:d,onBlur:s,error:o.amount&&l.amount,helperText:l.amount&&o.amount})),"recurring_charge"===a.type?i.a.createElement(c.a,{item:!0,xs:12,md:!0},i.a.createElement(B.a,{fullWidth:!0,variant:"outlined",select:!0,name:"frequency",label:"Frequency",onBlur:s,onChange:d,value:a.frequency,error:o.frequency&&l.frequency,helperText:l.frequency&&o.frequency},$.map((function(e,t){return i.a.createElement(W.a,{key:t,value:e},e)})))):null),i.a.createElement(c.a,{item:!0,container:!0,direction:"row",className:t.buttonBox},i.a.createElement(c.a,{item:!0},i.a.createElement(F.a,{color:"secondary",variant:"contained",size:"medium",startIcon:i.a.createElement(L.a,null),onClick:function(){n()},disableElevation:!0},"Cancel")),i.a.createElement(c.a,{item:!0},i.a.createElement(F.a,{type:"submit",color:"primary",variant:"contained",size:"medium",startIcon:i.a.createElement(z.a,null),form:"chargeInputForm",disabled:m},"Save")))))}))))}var ne=a(64),re=a(559),ie=a.n(re),ce=a(537),ue=a(514),le=a(545),oe=a(572),de=a(690),se=Object(ce.a)(Object(ue.a)(),"yyyy-MM-dd"),me=Object(Q.i)(),pe=Object(Q.l)(),_e=[{id:"charge_label",numeric:!1,disablePadding:!0,label:"Charge Name"},{id:"due_date",numeric:!1,disablePadding:!0,label:"Next Due Date"},{id:"amount",numeric:!1,disablePadding:!0,label:"Amount"},{id:"frequency",numeric:!1,disablePadding:!0,label:"Frequency"},{id:"edit",numeric:!1,disablePadding:!0,label:"Edit"},{id:"delete",numeric:!1,disablePadding:!0,label:"Delete"}],he=J.e().shape({lease_type:J.g().trim().required("Lease Type is Required"),rent_cycle:J.g().trim().required("Rent Cycle is Required"),tenants:J.a().required("Unit Tenant is Required"),start_date:J.c().required("Start Date is Required"),rent_amount:J.d().typeError("Rent Amount must be number").positive("Amount must be a positive number").required("Rent Amount is Required"),security_deposit:J.d().typeError("Security Deposit must be number").positive("Amount must be a positive number"),water_deposit:J.d().typeError("Water Deposit must be number").positive("Amount must be a positive number"),property_id:J.g().trim().required("Property is Required"),unit_id:J.g().trim().required("Unit is Required"),end_date:J.c().when("lease_type",{is:"Fixed",then:J.c().required("End Date is Required")}),rent_due_date:J.c().required("Next Due Date is Required"),security_deposit_due_date:J.c()}),fe=function(e){var t=Object(G.a)(),a=e.contacts,n=e.history,u=e.properties,l=e.propertyUnits,o=e.leaseUnitCharges,d=e.handleItemSubmit,m=e.handleItemDelete,f=e.leaseToEdit||{},y={id:f.id,property_id:f.property_id||"",unit_id:f.unit_id||"",tenants:a.filter((function(e){var t=e.id;return!!Array.isArray(f.tenants)&&f.tenants.includes(t)})),cosigner:a.find((function(e){var t=e.id;return f.cosigner===t}))||null,start_date:f.start_date||se,end_date:f.end_date||"",rent_due_date:f.rent_due_date||Object(ce.a)(Object(le.a)(Object(oe.a)(new Date),1),"yyyy-MM-dd"),security_deposit_due_date:f.security_deposit_due_date||se,rent_amount:f.rent_amount||"",terminated:f.terminated||!1,security_deposit:f.security_deposit||"",water_deposit:f.water_deposit||"",lease_type:f.lease_type||me[1],rent_cycle:f.rent_cycle||"Monthly",unit_charges:o},g={unit_id:f.unit_id,property_id:f.property_id,frequency:"",amount:"",due_date:se,charge_label:"",type:"one_time_charge"},b=Object(r.useState)(!1),E=Object(h.a)(b,2),v=E[0],O=E[1],j=Object(r.useState)(g),x=Object(h.a)(j,2),C=x[0],w=x[1],D=function(){O(!v)};return i.a.createElement(K.b,{initialValues:y,enableReinitialize:!0,validationSchema:he,onSubmit:function(){var e=Object(_.a)(p.a.mark((function e(t,a){var r,i,c,u,l,o,s;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.resetForm,i=a.setStatus,e.prev=1,c={id:t.id,property_id:t.property_id,unit_id:t.unit_id,lease_type:t.lease_type,rent_cycle:t.rent_cycle,tenants:t.tenants.map((function(e){return e.id})),cosigner:t.cosigner?t.cosigner.id:"",start_date:t.start_date,end_date:t.end_date,rent_due_date:t.rent_due_date,security_deposit:t.security_deposit,water_deposit:t.water_deposit,security_deposit_due_date:t.security_deposit_due_date,rent_amount:t.rent_amount,terminated:t.terminated},e.next=5,d(c,"leases");case 5:if(t.id){e.next=16;break}return u=t.tenants[0],l={payed:!1,charge_amount:t.rent_amount,charge_date:t.start_date,charge_label:"Rent",charge_type:"rent",due_date:t.start_date,tenant_id:u.id,unit_id:t.unit_id,property_id:t.property_id},o={payed:!1,charge_amount:t.security_deposit,charge_date:t.start_date,charge_label:"Security Deposit",charge_type:"security_deposit",due_date:t.security_deposit_due_date,tenant_id:u.id,unit_id:t.unit_id,property_id:t.property_id},s={payed:!1,charge_amount:t.water_deposit,charge_date:t.start_date,charge_label:"Water Deposit",charge_type:"water_deposit",due_date:t.security_deposit_due_date,tenant_id:u.id,unit_id:t.unit_id,property_id:t.property_id},e.next=12,d(l,"transactions-charges");case 12:return e.next=14,d(s,"transactions-charges");case 14:return e.next=16,d(o,"transactions-charges");case 16:r({}),t.id&&n.goBack(),i({sent:!0,msg:"Agreement saved successfully!"}),e.next=24;break;case 21:e.prev=21,e.t0=e.catch(1),i({sent:!1,msg:"Error! ".concat(e.t0,".")});case 24:case"end":return e.stop()}}),e,null,[[1,21]])})));return function(t,a){return e.apply(this,arguments)}}()},(function(e){var r=e.values,p=e.status,_=e.handleSubmit,h=e.errors,f=e.touched,y=e.handleChange,b=e.setFieldValue,E=e.handleBlur,O=e.isSubmitting;return i.a.createElement("form",{className:t.form,method:"post",id:"unitLeaseInputForm",onSubmit:_},i.a.createElement(c.a,{container:!0,spacing:2,direction:"column"},p&&p.msg&&i.a.createElement(Y.a,{variant:p.sent?"success":"error",message:p.msg}),O&&i.a.createElement(Z.a,{open:!0}),i.a.createElement(c.a,{container:!0,spacing:4,direction:"row",alignItems:"flex-start"},i.a.createElement(c.a,{item:!0,container:!0,md:6,direction:"column",spacing:2},i.a.createElement(c.a,{item:!0},i.a.createElement(ne.a,{variant:"subtitle1"},"Property & Unit With Agreement")),i.a.createElement(c.a,{item:!0,xs:12},i.a.createElement(B.a,{fullWidth:!0,label:"Property",variant:"outlined",id:"property_id",select:!0,name:"property_id",value:r.property_id,onChange:function(e){b("property_id",e.target.value),b("unit_id","")},onBlur:E,error:h.property_id&&f.property_id,helperText:f.property_id&&h.property_id},u.map((function(e,t){return i.a.createElement(W.a,{key:t,value:e.id},e.ref)})))),i.a.createElement(c.a,{item:!0,xs:12},i.a.createElement(B.a,{fullWidth:!0,select:!0,variant:"outlined",id:"unit_id",name:"unit_id",label:"Unit",value:r.unit_id,onChange:function(e){b("unit_id",e.target.value),b("unit_charges",o.filter((function(t){return t.unit_id===e.target.value})))},onBlur:E,error:h.unit_id&&f.unit_id,helperText:f.unit_id&&h.unit_id},l.filter((function(e){return e.property_id===r.property_id})).map((function(e,t){return i.a.createElement(W.a,{key:t,value:e.id},e.ref)})))),i.a.createElement(c.a,{item:!0},i.a.createElement(ne.a,{variant:"subtitle1"},"Rental Agreement Type")),i.a.createElement(c.a,{item:!0,xs:12},i.a.createElement(B.a,{fullWidth:!0,variant:"outlined",select:!0,name:"lease_type",label:"Rental Agreement Type",id:"lease_type",onBlur:E,onChange:y,value:r.lease_type,error:h.lease_type&&f.lease_type,helperText:f.lease_type&&h.lease_type},me.map((function(e,t){return i.a.createElement(W.a,{key:t,value:e},e)})))),i.a.createElement(c.a,{item:!0},i.a.createElement(ne.a,{variant:"subtitle1"},"Agreement Start & End Dates")),i.a.createElement(c.a,{item:!0,container:!0,direction:"row",justify:"center",spacing:2},i.a.createElement(c.a,{item:!0,xs:12,md:6},i.a.createElement(B.a,{fullWidth:!0,variant:"outlined",label:"Start Date",error:"start_date"in h,helperText:h.start_date,id:"start_date",type:"date",name:"start_date",value:r.start_date,onChange:y,onBlur:E,InputLabelProps:{shrink:!0}})),i.a.createElement(c.a,{item:!0,xs:12,md:6},i.a.createElement(B.a,{fullWidth:!0,variant:"outlined",id:"end_date",type:"date",name:"end_date",label:"End Date",value:r.end_date,onChange:y,onBlur:E,InputLabelProps:{shrink:!0},error:h.end_date&&f.end_date,helperText:f.end_date&&h.end_date}))),i.a.createElement(c.a,{item:!0},i.a.createElement(ne.a,{variant:"subtitle1"},"Rent")),i.a.createElement(c.a,{item:!0,container:!0,direction:"row",justify:"center",spacing:2},i.a.createElement(c.a,{item:!0,xs:12,md:6},i.a.createElement(B.a,{fullWidth:!0,variant:"outlined",select:!0,name:"rent_cycle",label:"Rent Cycle",id:"rent_cycle",onBlur:E,onChange:y,value:r.rent_cycle,error:h.rent_cycle&&f.rent_cycle,helperText:"Frequency at which rent is charged on unit"},pe.map((function(e,t){return i.a.createElement(W.a,{key:t,value:e},e)})))),i.a.createElement(c.a,{item:!0,xs:12,md:6},i.a.createElement(B.a,{fullWidth:!0,variant:"outlined",id:"rent_due_date",type:"date",name:"rent_due_date",label:"Rent Next Due Date",value:r.rent_due_date,error:h.rent_due_date&&f.rent_due_date,helperText:"Next date when the rent is due",onChange:y,onBlur:E,InputLabelProps:{shrink:!0}}))),i.a.createElement(c.a,{item:!0,xs:12},i.a.createElement(B.a,{fullWidth:!0,variant:"outlined",label:"Rent Amount",id:"rent_amount",type:"text",name:"rent_amount",value:r.rent_amount,onChange:y,onBlur:E,error:h.rent_amount&&f.rent_amount,helperText:f.rent_amount&&h.rent_amount}))),i.a.createElement(c.a,{item:!0,container:!0,md:6,direction:"column",justify:"center",spacing:2},i.a.createElement(c.a,{item:!0},i.a.createElement(ne.a,{variant:"subtitle1",paragraph:!0},"Security Deposit")),i.a.createElement(c.a,{item:!0,xs:12},i.a.createElement(B.a,{fullWidth:!0,variant:"outlined",id:"security_deposit_due_date",type:"date",name:"security_deposit_due_date",label:"Due Date",helperText:"Date when the security deposit is due.",value:r.security_deposit_due_date,onChange:y,onBlur:E,InputLabelProps:{shrink:!0}})),i.a.createElement(c.a,{item:!0,xs:12},i.a.createElement(B.a,{fullWidth:!0,variant:"outlined",id:"security_deposit",label:"Security Deposit Amount",name:"security_deposit",value:r.security_deposit,onChange:y,onBlur:E,error:h.security_deposit&&f.security_deposit,helperText:f.security_deposit&&h.security_deposit})),i.a.createElement(c.a,{item:!0},i.a.createElement(ne.a,{variant:"subtitle1",paragraph:!0},"Water Deposit")),i.a.createElement(c.a,{item:!0,xs:12},i.a.createElement(B.a,{fullWidth:!0,variant:"outlined",id:"water_deposit",label:"Water Deposit Amount",name:"water_deposit",value:r.water_deposit,onChange:y,onBlur:E,error:h.water_deposit&&f.water_deposit,helperText:f.water_deposit&&h.water_deposit})),i.a.createElement(c.a,{item:!0},i.a.createElement(ne.a,{variant:"body1",color:"textSecondary"},"Don't forget to record the payments once you have collected the deposits.")),i.a.createElement(c.a,{item:!0},i.a.createElement(ne.a,{variant:"subtitle1"},"Tenants & Cosigner")),i.a.createElement(c.a,{item:!0,xs:12},i.a.createElement(de.a,{id:"tenants-select",multiple:!0,value:r.tenants,onChange:function(e,t){b("tenants",t)},style:{width:"100%"},options:a,autoHighlight:!0,getOptionLabel:function(e){return e?"".concat(e.first_name," ").concat(e.last_name):""},renderOption:function(e){return i.a.createElement(i.a.Fragment,null,e.first_name," ",e.last_name)},renderInput:function(e){return i.a.createElement(B.a,Object.assign({},e,{label:"Tenants",variant:"outlined",error:h.tenants&&f.tenants,helperText:f.tenants&&h.tenants,inputProps:Object(s.a)({},e.inputProps)}))}})),i.a.createElement(c.a,{item:!0,xs:12},i.a.createElement(de.a,{id:"cosigner-select",value:r.cosigner,onChange:function(e,t){b("cosigner",t)},style:{width:"100%"},options:a,autoHighlight:!0,getOptionLabel:function(e){return e?"".concat(e.first_name," ").concat(e.last_name):""},renderOption:function(e){return i.a.createElement(i.a.Fragment,null,e.first_name," ",e.last_name)},renderInput:function(e){return i.a.createElement(B.a,Object.assign({},e,{label:"Cosigner",variant:"outlined",error:h.cosigner&&f.cosigner,helperText:f.cosigner&&h.cosigner,inputProps:Object(s.a)({},e.inputProps)}))}})))),i.a.createElement(c.a,{item:!0,container:!0,direction:"column",spacing:1,xs:12},i.a.createElement(c.a,{item:!0,xs:12},i.a.createElement(ne.a,{variant:"subtitle1"},"Unit Charges")),i.a.createElement(c.a,{item:!0,xs:12},i.a.createElement(M,{rows:r.unit_charges,headCells:_e,handleEditClick:function(e){w(r.unit_charges[e]),D()},handleDelete:function(e){var t=r.unit_charges.slice(),a=t.splice(e,1)[0]||{};a.id&&m(a.id,"unit-charges"),b("unit_charges",t)}}),v?i.a.createElement(ae,{open:v,handleClose:D,history:n,handleItemSubmit:d,chargeValues:C}):null),i.a.createElement(c.a,{item:!0,xs:12},i.a.createElement(F.a,{className:t.oneMarginTopBottom,variant:"outlined",size:"medium",startIcon:i.a.createElement(ie.a,null),onClick:function(){w(Object(s.a)(Object(s.a)({},g),{},{unit_id:r.unit_id})),r.unit_id&&D()},disableElevation:!0},"Add Charge"))),i.a.createElement(c.a,{item:!0,container:!0,direction:"row",className:t.buttonBox},i.a.createElement(c.a,{item:!0},i.a.createElement(F.a,{color:"secondary",variant:"contained",size:"medium",startIcon:i.a.createElement(L.a,null),onClick:function(){n.goBack()},disableElevation:!0},"Cancel")),i.a.createElement(c.a,{item:!0},i.a.createElement(F.a,{type:"submit",color:"primary",variant:"contained",size:"medium",startIcon:i.a.createElement(z.a,null),form:"unitLeaseInputForm",disabled:O},r.id?"Edit Agreement":"Add Agreement")))))}))},ye=a(25),ge=function(e){var t=e.leaseToEdit,a=e.tenantsToShow,n=e.history,r=e.properties,o=e.propertyUnitsToShow,d=e.leaseUnitCharges,s=e.handleItemSubmit,m=e.handleItemDelete,p=t.id?"Edit Rental Agreement":"Add Rental Agreement";return i.a.createElement(l.a,{pageTitle:"Rental Agreement Details"},i.a.createElement(c.a,{container:!0,justify:"center",direction:"column"},i.a.createElement(c.a,{item:!0,key:2},i.a.createElement(u.a,{text:p})),i.a.createElement(c.a,{container:!0,direction:"column",justify:"center",item:!0,key:3},i.a.createElement(fe,{contacts:a,history:n,properties:r,propertyUnits:o,leaseUnitCharges:d,handleItemSubmit:s,handleItemDelete:m,leaseToEdit:t}))))};ge=Object(o.b)((function(e,t){var a=e.leases.find((function(e){return e.id===t.match.params.leaseId}))||{},r=a.id?e.leases.filter((function(e){var t=e.terminated,n=e.id;return!0!==t&&n!==a.id})):e.leases.filter((function(e){return!0!==e.terminated})),i=r.map((function(e){return e.unit_id})),c=[];r.forEach((function(e){c.push.apply(c,Object(n.a)(e.tenants))}));var u=e.propertyUnits.filter((function(e){var t=e.id;return!i.includes(t)})),l=e.contacts.filter((function(e){var t=e.id;return!c.includes(t)}));return{leaseToEdit:e.leases.find((function(e){return e.id===t.match.params.leaseId}))||{},properties:e.properties,propertyUnitsToShow:u,tenantsToShow:l,leaseUnitCharges:e.propertyUnitCharges.filter((function(e){return e.unit_id===a.unit_id}))}}),(function(e){return{handleItemDelete:function(t,a){return e(Object(d.g)(t,a))},handleItemSubmit:function(t,a){return e(Object(d.h)(t,a))}}}))(ge);t.default=Object(ye.g)(ge)}}]);
//# sourceMappingURL=20.23e27036.chunk.js.map