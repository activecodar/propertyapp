(this.webpackJsonppropetypro=this.webpackJsonppropetypro||[]).push([[49],{549:function(e,t,a){"use strict";a.d(t,"b",(function(){return E})),a.d(t,"e",(function(){return v})),a.d(t,"d",(function(){return w})),a.d(t,"p",(function(){return y})),a.d(t,"m",(function(){return O})),a.d(t,"n",(function(){return j})),a.d(t,"j",(function(){return x})),a.d(t,"i",(function(){return k})),a.d(t,"l",(function(){return C})),a.d(t,"o",(function(){return T})),a.d(t,"f",(function(){return q})),a.d(t,"h",(function(){return I})),a.d(t,"q",(function(){return S})),a.d(t,"c",(function(){return B})),a.d(t,"g",(function(){return P})),a.d(t,"k",(function(){return W})),a.d(t,"a",(function(){return N}));var r=a(512),n=a(513),i=a(514),o=a(515),l=a(572),m=a(573),u=a(574),c=a(575),s=Object(r.a)({start:Object(n.a)(Object(i.a)()),end:Object(o.a)(Object(i.a)())}),d=["Mr","Prof","Hon","Sir","Mrs","Miss","Dr","Madam","Other"],p=["Male","Female","Unspecified"],b=["Security Deposit Refund","Water Deposit Refund","Management Fees","Utilities","Taxes","Mortgage","Office","Maintenance & Cleaning","Advertising","Insurance","Legal & Other Professional Fees","Auto & Travel","Supplies","Other Refund","Repairs","Other"],f=["Bed Sitter","One Bedroom","Two Bedroom","Single Room","Double Room","Shop","Other"],h=["Fixed","Fixed w/rollover"],_=["Electric","Sewer","Water"],g=["Daily","Weekly","Monthly","Quarterly","Half-Yearly","Yearly"];function E(){return d}function v(){return p}function w(){return b}function y(){return f}function O(){for(var e=[],t=1;t<=5;t++)e.push(t);return e.concat("5+")}function j(){for(var e=[],t=1;t<=5;t++)e.push(t);return e}function x(){return _}function k(){return h}function C(){return g}function T(){return[{id:"month-to-date",text:"Month To Date"},{id:"last-month",text:"Last Month"},{id:"3-months-to-date",text:"3 Months To Date"},{id:"year-to-date",text:"Year To Date"},{id:"last-year",text:"Last Year"}]}function q(){return[Object(l.a)(Object(m.a)(Object(i.a)(),1)),Object(u.a)(Object(m.a)(Object(i.a)(),1))]}function I(){return[Object(n.a)(Object(c.a)(Object(i.a)(),1)),Object(o.a)(Object(c.a)(Object(i.a)(),1))]}function S(){return[Object(n.a)(Object(i.a)()),Object(i.a)()]}function B(){return[Object(l.a)(Object(i.a)()),Object(u.a)(Object(i.a)())]}function P(){return[Object(l.a)(Object(m.a)(Object(i.a)(),2)),Object(u.a)(Object(i.a)())]}function W(){return s}var N=new Intl.NumberFormat(void 0,{style:"decimal",currency:"KES"})},556:function(e,t,a){"use strict";a.d(t,"a",(function(){return p}));var r=a(0),n=a.n(r),i=a(199),o=a(526),l=a(129),m=a(527),u=a(529),c=a(453),s=a(64),d=Object(i.a)((function(e){return{root:{display:"flex",alignItems:"center",height:80,width:120},wrapper:{margin:e.spacing(1),position:"relative",height:50,width:50},buttonProgress:{color:l.a[500],position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12}}}));function p(e){var t=e.open,a=e.dialogTitle,r=d();return n.a.createElement(m.a,{maxWidth:"md","aria-labelledby":"simple-dialog-title",open:t},n.a.createElement(u.a,null,n.a.createElement(c.a,{container:!0,alignItems:"center",direction:"column"},n.a.createElement(c.a,{item:!0,lg:!0},n.a.createElement(s.a,null,a||"Saving...")),n.a.createElement(c.a,{item:!0,lg:!0},n.a.createElement("div",{className:r.root},n.a.createElement("div",{className:r.wrapper},t&&n.a.createElement(o.a,{size:50,className:r.buttonProgress})))))))}},580:function(e,t,a){"use strict";var r=a(44),n=a(0),i=a.n(n),o=a(453),l=a(525),m=a(527),u=a(529),c=a(587);a(588);t.a=function(e){var t=e.open,a=e.selectedFile,s=e.setCroppedImageData,d=e.cropHeight,p=e.cropWidth,b=Object(n.useState)(),f=Object(r.a)(b,2),h=f[0],_=f[1],g=Object(n.useState)(),E=Object(r.a)(g,2),v=E[0],w=E[1],y=a,O=new FileReader;O.onloadend=function(){w(O.result)},O.readAsDataURL(y);var j=function(){s("")};return i.a.createElement(m.a,{open:t,onClose:j,"aria-labelledby":"form-dialog-title"},i.a.createElement(u.a,null,i.a.createElement(o.a,{container:!0,spacing:2},i.a.createElement(o.a,{item:!0},i.a.createElement(c.a,{style:{height:"100%",width:"100%"},initialAspectRatio:p===d?1:16/9,src:v,viewMode:.5,guides:!0,minCropBoxHeight:d,minCropBoxWidth:p,background:!1,responsive:!0,autoCropArea:.5,checkOrientation:!1,onInitialized:function(e){_(e)},cropBoxResizable:!1,data:{height:d,width:p}})),i.a.createElement(o.a,{item:!0,container:!0,justify:"center",direction:"row",spacing:2},i.a.createElement(o.a,{item:!0},i.a.createElement(l.a,{color:"secondary",variant:"contained",size:"medium",onClick:function(){return j()},disableElevation:!0},"Cancel")),i.a.createElement(o.a,{item:!0},i.a.createElement(l.a,{color:"primary",variant:"contained",size:"medium",onClick:function(){return function(){if("undefined"!==typeof h){var e=h.getCroppedCanvas().toDataURL();y.data=e,s(y)}}()}},"Crop Image"))))))}},704:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),i=a(453),o=a(64),l=a(203),m=a(202),u=a(41),c=a(10),s=a.n(c),d=a(20),p=a(534),b=a(525),f=a(542),h=a(541),_=a(524),g=a(557),E=a.n(g),v=a(558),w=a.n(v),y=a(25),O=a(46),j=a(450),x=a(589),k=a.n(x),C=a(208),T=a(556),q=a(549),I=a(37),S=a(19),B=a(55),P=a(580),W=Object(q.b)(),N=Object(q.e)(),D=S.e().shape({title:S.g().trim().required("Title is required"),gender:S.g().trim().required("Gender is required"),first_name:S.g().trim().required("First Name is required"),last_name:S.g().trim().required("Last Name is Required"),id_number:S.g().trim().min(8).required("Id Number is Required"),primary_email:S.g().trim().email("Invalid Email").required("Primary Email is Required"),other_email:S.g().trim().email("Invalid Email"),phone_number:S.g().trim().min(10,"Too Short").required("Phone Number is Required"),work_mobile_number:S.g().trim().min(10,"Too Short"),password:S.g().trim().min(6,"Too Short!").max(20,"We prefer an insecure system, try a shorter password.").required("Pasword is Required"),confirm_password:S.g().trim().test("passwords-match","Passwords must match",(function(e){return this.parent.password===e})).required("Please Confirm Password")}),R=function(e){var t=e.handleItemSubmit,a=e.userToEdit?e.userToEdit:{},r={id:a.id,gender:a.gender||"",title:a.title||"",id_number:a.id_number||"",first_name:a.first_name||"",last_name:a.last_name||"",primary_email:a.primary_email||"",other_email:a.other_email||"",phone_number:a.phone_number||"",work_mobile_number:a.work_mobile_number||"",user_avatar_url:a.user_avatar_url||"",user_image:"",password:"",confirm_password:""},l=Object(y.f)(),m=Object(O.a)();return n.a.createElement(B.b,{initialValues:r,enableReinitialize:!0,validationSchema:D,onSubmit:function(){var e=Object(d.a)(s.a.mark((function e(a,r){var n,i,o,m,u,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.resetForm,i=r.setStatus,e.prev=1,o={id:a.id,title:a.title,gender:a.gender,id_number:a.id_number,first_name:a.first_name,last_name:a.last_name,primary_email:a.primary_email,other_email:a.other_email,phone_number:a.phone_number,work_mobile_number:a.work_mobile_number},!a.user_image||!a.user_image.data){e.next=11;break}if(!a.user_avatar_url){e.next=7;break}return e.next=7,Object(I.c)(a.user_avatar_url);case 7:return e.next=9,Object(I.t)(a.user_image);case 9:m=e.sent,o.user_avatar_url=m;case 11:if(!a.id){e.next=16;break}return e.next=14,Object(I.s)({uid:a.id,userProfile:{email:a.primary_email,password:a.password}});case 14:e.next=24;break;case 16:return e.next=18,Object(I.a)({email:a.primary_email,password:a.password});case 18:if(u=e.sent,c=u.data,Object.assign(o,{id:c.uid}),!c){e.next=24;break}return e.next=24,Object(I.m)({userId:c.uid});case 24:return e.next=26,t(o,"users");case 26:n({}),a.id&&l.goBack(),i({sent:!0,msg:"Details saved successfully!"}),e.next=35;break;case 31:e.prev=31,e.t0=e.catch(1),i({sent:!1,msg:"Error! ".concat(e.t0,".")}),console.log("Error while saving user => ",e.t0);case 35:case"end":return e.stop()}}),e,null,[[1,31]])})));return function(t,a){return e.apply(this,arguments)}}()},(function(e){var t=e.values,a=e.status,r=e.touched,u=e.errors,c=e.handleChange,s=e.handleBlur,d=e.handleSubmit,g=e.isSubmitting,v=e.setFieldValue;return n.a.createElement("form",{className:m.form,method:"post",noValidate:!0,id:"userInputForm",onSubmit:d},n.a.createElement(i.a,{container:!0,spacing:4,justify:"center",alignItems:"center",direction:"column"},a&&a.msg&&n.a.createElement(C.a,{variant:a.sent?"success":"error",message:a.msg}),g&&n.a.createElement(T.a,{open:!0}),n.a.createElement(i.a,{justify:"center",container:!0,item:!0,direction:"column",spacing:2},n.a.createElement(i.a,{item:!0,container:!0,justify:"center",spacing:4,alignItems:"center"},n.a.createElement(i.a,{key:1,item:!0},n.a.createElement(f.a,{alt:"User Image",src:t.user_image?t.user_image.data:t.user_avatar_url,className:m.largeAvatar})),t.file_to_load_url&&n.a.createElement(P.a,{open:!0,selectedFile:t.file_to_load_url,setCroppedImageData:function(e){v("file_to_load_url",""),v("user_image",e)},cropHeight:160,cropWidth:160}),n.a.createElement(i.a,{key:2,item:!0},n.a.createElement(p.a,null,n.a.createElement("input",{onChange:function(e){var t=e.currentTarget.files[0];v("file_to_load_url",t)},accept:"image/*",className:m.fileInputDisplayNone,id:"user-image-input",type:"file"}),n.a.createElement("label",{htmlFor:"user-image-input"},n.a.createElement(j.a,{color:"primary","aria-label":"upload picture",component:"span"},n.a.createElement(k.a,null))),n.a.createElement(p.a,null,t.user_avatar_url||t.user_image?"Change Photo":"Add Photo")))),n.a.createElement(i.a,{item:!0,container:!0,direction:"row",spacing:2},n.a.createElement(i.a,{item:!0,xs:12,sm:!0},n.a.createElement(h.a,{fullWidth:!0,required:!0,variant:"outlined",select:!0,name:"title",label:"Title",id:"title",onBlur:s,onChange:c,value:t.title,error:u.title&&r.title,helperText:r.title&&u.title},W.map((function(e,t){return n.a.createElement(_.a,{key:t,value:e},e)})))),n.a.createElement(i.a,{item:!0,xs:12,sm:!0},n.a.createElement(h.a,{fullWidth:!0,required:!0,variant:"outlined",select:!0,name:"gender",label:"Gender",id:"gender",onBlur:s,onChange:c,value:t.gender,error:u.gender&&r.gender,helperText:r.gender&&u.gender},N.map((function(e,t){return n.a.createElement(_.a,{key:t,value:e},e)}))))),n.a.createElement(i.a,{item:!0,container:!0,direction:"row",spacing:2},n.a.createElement(i.a,{item:!0,xs:12,sm:!0},n.a.createElement(h.a,{fullWidth:!0,required:!0,variant:"outlined",id:"first_name",name:"first_name",label:"First Name",value:t.first_name,onChange:c,onBlur:s,error:u.first_name&&r.first_name,helperText:r.first_name&&u.first_name})),n.a.createElement(i.a,{item:!0,xs:12,sm:!0},n.a.createElement(h.a,{fullWidth:!0,required:!0,variant:"outlined",id:"last_name",name:"last_name",label:"Last Name",value:t.last_name,onChange:c,onBlur:s,error:u.last_name&&r.last_name,helperText:r.last_name&&u.last_name}))),n.a.createElement(i.a,{item:!0,sm:!0},n.a.createElement(h.a,{fullWidth:!0,required:!0,variant:"outlined",id:"id_number",name:"id_number",label:"ID Number",value:t.id_number,onChange:c,onBlur:s,error:u.id_number&&r.id_number,helperText:r.id_number&&u.id_number})),n.a.createElement(i.a,{item:!0,container:!0,direction:"row",spacing:2},n.a.createElement(i.a,{item:!0,xs:12,sm:!0},n.a.createElement(h.a,{fullWidth:!0,required:!0,variant:"outlined",id:"phone_number",name:"phone_number",label:"Personal Phone Number",onChange:c,onBlur:s,error:u.phone_number&&r.phone_number,helperText:r.phone_number&&u.phone_number,value:t.phone_number})),n.a.createElement(i.a,{item:!0,xs:12,sm:!0},n.a.createElement(h.a,{fullWidth:!0,variant:"outlined",id:"work_mobile_number",name:"work_mobile_number",label:"Work Phone Number",onChange:c,onBlur:s,helperText:"Work Phone Number",value:t.work_mobile_number}))),n.a.createElement(i.a,{item:!0,container:!0,direction:"row",spacing:2},n.a.createElement(i.a,{item:!0,xs:12,sm:!0},n.a.createElement(h.a,{fullWidth:!0,required:!0,variant:"outlined",name:"primary_email",label:"Primary Email",id:"primary_email",onBlur:s,onChange:c,value:t.primary_email,error:u.primary_email&&r.primary_email,helperText:r.primary_email&&u.primary_email})),n.a.createElement(i.a,{item:!0,xs:12,sm:!0},n.a.createElement(h.a,{fullWidth:!0,variant:"outlined",name:"other_email",label:"Other Email",id:"other_email",onBlur:s,onChange:c,value:t.other_email,error:u.other_email&&r.other_email,helperText:r.other_email&&u.other_email}))),n.a.createElement(i.a,{item:!0},n.a.createElement(o.a,null,"Password")),n.a.createElement(i.a,{item:!0,container:!0,direction:"row",spacing:2},n.a.createElement(i.a,{item:!0,xs:12,sm:!0},n.a.createElement(h.a,{fullWidth:!0,required:!0,type:"password",variant:"outlined",name:"password",label:"User Password",id:"password",onBlur:s,onChange:c,value:t.password,error:u.password&&r.password,helperText:r.password&&u.password})),n.a.createElement(i.a,{item:!0,xs:12,sm:!0},n.a.createElement(h.a,{fullWidth:!0,type:"password",required:!0,variant:"outlined",name:"confirm_password",label:"Confirm Password",id:"confirm_password",onBlur:s,onChange:c,value:t.confirm_password,error:u.confirm_password&&r.confirm_password,helperText:r.confirm_password&&u.confirm_password})))),n.a.createElement(i.a,{item:!0,container:!0,direction:"row",className:m.buttonBox},n.a.createElement(i.a,{item:!0},n.a.createElement(b.a,{color:"secondary",variant:"contained",size:"medium",startIcon:n.a.createElement(w.a,null),onClick:function(){return l.goBack()},disableElevation:!0},"Cancel")),n.a.createElement(i.a,{item:!0},n.a.createElement(b.a,{type:"submit",color:"primary",variant:"contained",size:"medium",startIcon:n.a.createElement(E.a,null),form:"userInputForm",disabled:g},t.id?"Save Details":"Create User")))))}))},F=function(e){var t=e.match,a=e.userToEdit,r=e.handleItemSubmit,u=a.id?"Edit User":"New User";return n.a.createElement(m.a,{pageTitle:"User Details"},n.a.createElement(i.a,{container:!0,justify:"center",direction:"column"},n.a.createElement(i.a,{item:!0,key:2},n.a.createElement(l.a,{text:u}),n.a.createElement(o.a,{variant:"body1",color:"textSecondary"},"Only admin user can create/edit users")),n.a.createElement(i.a,{container:!0,direction:"column",justify:"center",item:!0,key:3},n.a.createElement(R,{match:t,userToEdit:a,handleItemSubmit:r}))))};F=Object(u.b)((function(e,t){return{userToEdit:e.users.find((function(e){return e.id===t.match.params.userId}))||{}}}),(function(e){return{handleItemSubmit:function(t,a){return e(Object(I.h)(t,a))}}}))(F);t.default=Object(y.g)(F)}}]);
//# sourceMappingURL=49.f34c2ac8.chunk.js.map